(function(t){function e(e){for(var s,o,r=e[0],l=e[1],c=e[2],u=0,p=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);d&&d(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,r=1;r<a.length;r++){var l=a[r];0!==n[l]&&(s=!1)}s&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},n={app:0},i=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"12e6":function(t,e,a){},"19a5":function(t,e,a){},"3aff":function(t,e,a){},4678:function(t,e,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var e=i(t);return a(e)}function i(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=i,t.exports=n,n.id="4678"},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("a026"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"body",attrs:{id:"app"}},[a("header",[a("div",{staticClass:"container full grid"},[t._m(0),a("div",{staticClass:"menu"},[a("router-link",{staticClass:"btn",attrs:{to:{name:"Dashboard"}}},[t._v("Dashboard")]),a("router-link",{staticClass:"btn",attrs:{to:{name:"MyCities"}}},[t._v("My Cities")])],1)])]),a("div",{staticClass:"container full main"},[a("Breadcrumbs"),a("router-view")],1)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"logo"},[a("span",[t._v("Sidermit")])])}],o=(a("5a7a"),a("2877")),r={},l=Object(o["a"])(r,n,i,!1,null,"c38d26c8",null),c=l.exports,d=a("8c4f"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"MyCities"},[t._m(0),a("section",{staticClass:"cities"},[a("div",{staticClass:"grid heading"},[a("h2",[t._v(t._s(t.cities.length)+" Cities available")])]),t.cities.length>0?[a("div",{staticClass:"grid cities"},t._l(t.cities,(function(e){return a("CityCard",{key:e.public_id,attrs:{city:e},on:{"new-city":t.updateCityList,"erase-city":t.eraseCityList}})})),1)]:[a("div",{staticClass:"empty-box"},[a("p",[t._v("No cities found, start making your first city")]),a("router-link",{staticClass:"btn",attrs:{to:{name:"NewCity"}}},[a("span",[t._v("Add new city")]),a("span",{staticClass:"material-icons"},[t._v("add")])])],1)]],2),a("footer",[a("div",{staticClass:"container full grid"},[a("div",{staticClass:"left-content"}),a("div",{staticClass:"right-content"},[a("router-link",{staticClass:"btn",attrs:{to:{name:"NewCity"}}},[a("span",[t._v("Add new city")]),a("span",{staticClass:"material-icons"},[t._v("add")])])],1)])])])},p=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("h1",[t._v("My cities")])])}],h=(a("4de4"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card neuro cityprev"},[a("div",{staticClass:"grid top-info"},[a("div",[a("h3",[t._v(t._s(t.city.name))]),a("span",{staticClass:"p-min"},[t._v("Created at "+t._s(t.getLocalDate(t.city.created_at)))])]),a("div",{staticClass:"grid min"},[a("router-link",{staticClass:"btn icon",attrs:{to:{name:"EditCity",params:{cityPublicId:t.city.public_id}},tag:"button",alt:"Edit"}},[a("span",{staticClass:"material-icons"},[t._v("edit")])]),a("button",{staticClass:"btn icon",attrs:{alt:"Duplicate"},on:{click:function(e){t.showConfirmDuplicateModal=!0}}},[a("span",{staticClass:"material-icons"},[t._v("file_copy")])]),a("button",{staticClass:"btn icon",attrs:{alt:"Delete"},on:{click:function(e){t.showConfirmDeleteModal=!0}}},[a("span",{staticClass:"material-icons"},[t._v("delete")])])],1)]),a("div",{staticClass:"grid mid-info"},[a("div",{staticClass:"graph-container"},[a("CityGraph",{attrs:{network:t.city.network_descriptor,showLabel:!1,symbolSize:10}})],1),a("dl",t._l(t.city.scene_set,(function(e){return a("div",{key:e.public_id},[a("dt",[a("h4",[t._v(t._s(e.name))])]),a("dd",[a("span",{staticClass:"p-min"},[t._v(t._s(e.transportnetwork_set.length)+" networks available")])])])})),0)]),a("div",{staticClass:"bot-info"},[a("router-link",{staticClass:"btn neuro",attrs:{to:{name:"CityDetail",params:{cityPublicId:t.city.public_id}}}},[t._v("View details")])],1),t.showConfirmDeleteModal?a("Modal",{attrs:{showCancelButton:!0,modalClasses:["warning"]},on:{cancel:function(e){t.showConfirmDeleteModal=!1},close:function(e){t.showConfirmDeleteModal=!1},ok:function(e){return t.deleteCity(t.city.public_id)}}},[a("template",{slot:"title"},[a("div",{staticClass:"icon"},[a("span",{staticClass:"material-icons"},[t._v("warning")])]),a("div",[a("h4",[t._v("Warning")])])]),a("p",{attrs:{slot:"content"},slot:"content"},[t._v('Are you sure you want to delete city "'+t._s(t.city.name)+'"?')]),a("template",{slot:"close-button-name"},[t._v("Proceed")])],2):t._e(),t.showConfirmDuplicateModal?a("Modal",{attrs:{showCancelButton:!0,modalClasses:["warning"]},on:{cancel:function(e){t.showConfirmDuplicateModal=!1},close:function(e){t.showConfirmDuplicateModal=!1},ok:function(e){return t.duplicateCity(t.city.public_id)}}},[a("template",{slot:"title"},[a("div",{staticClass:"icon"},[a("span",{staticClass:"material-icons"},[t._v("warning")])]),a("div",[a("h4",[t._v("Warning")])])]),a("p",{attrs:{slot:"content"},slot:"content"},[t._v('Are you sure you want to duplicate city "'+t._s(t.city.name)+'"?')]),a("template",{slot:"close-button-name"},[t._v("Proceed")])],2):t._e()],1)}),m=[],v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-container",on:{click:function(e){return t.$emit("close")}}},[a("div",{staticClass:"modal",class:t.modalClasses,on:{click:function(t){t.stopPropagation()}}},[a("div",{staticClass:"modal-title"},[t._t("title")],2),a("div",{staticClass:"modal-content"},[t._t("content")],2),t.showBase?a("div",{staticClass:"modal-base",class:{}},[t._t("base",[t.showCancelButton?a("button",{staticClass:"btn solo red",on:{click:function(e){return t.$emit("cancel")}}},[t._t("cancel-button-name",[t._v("Cancel")])],2):t._e(),a("button",{staticClass:"btn solo",on:{click:function(e){t.$emit("close"),t.$emit("ok")}}},[t._t("close-button-name",[t._v("Ok")])],2)])],2):t._e()])])},_=[],f={name:"ModalWarning",props:{showBase:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!1},modalClasses:{type:Array,default:function(){return[]}}}},b=f,w=Object(o["a"])(b,v,_,!1,null,"700c8319",null),g=w.exports,y=a("c1df"),C=a.n(y),k={methods:{getLocalDate:function(t){return C()(t).format("YYYY-MM-DD")}}},x=k,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-chart",{attrs:{options:t.getOptions()}})},I=[],P=(a("4160"),a("d81d"),a("b0c0"),a("a9e3"),a("159b"),a("5530")),N=a("9ca8"),R=(a("ef97"),a("23ee"),{name:"CityGraph",components:{"v-chart":N["a"]},props:{network:{type:Object,required:!0},symbolSize:{type:Number,default:15},showLabel:{type:Boolean,default:!0},showNodeId:{type:Boolean,default:!1},edgeWeights:{type:Object,required:!1,default:function(){return{}}},routes:{type:Array,required:!1,default:function(){return[]}}},methods:{getOptions:function(){var t=this,e=this.network.nodes,a=this.network.edges,s=[],n=this.edgeWeights;e.forEach((function(e){var a=t.showNodeId?e.name+" ("+e.id+")":e.name,n={label:{show:t.showLabel,position:"bottom"},emphasis:{label:{show:!0}},itemStyle:{color:"#D6951B",borderWidth:0},symbolSize:t.symbolSize,name:a,value:[e.x,e.y,e.name,e.id]};"cbd"==e.type?n.itemStyle={color:"#fff",borderWidth:2,borderColor:"#CACECE"}:"periphery"==e.type?n.itemStyle={color:"#D06318",borderWidth:2,borderColor:"#D06318"}:"subcenter"==e.type&&(n.itemStyle={color:"#D6951B",borderWidth:2,borderColor:"#D6951B"}),s.push(n)}));var i=a.map((function(t){var e={};return n[t.source]&&n[t.source][t.target]&&(e={lineStyle:{width:n[t.source][t.target].value,color:n[t.source][t.target].hasRoutes?"#666666":"#CACECE"},emphasis:{label:{show:!0,formatter:function(){return n[t.source][t.target].routesNumber+" lines"}}}}),Object(P["a"])(Object(P["a"])({},e),{source:t.source,target:t.target})})),o={visualMap:{show:!1,min:0,max:100,dimension:1},grid:{left:0,bottom:10,containLabel:!0,top:10,right:15},xAxis:{type:"value",show:!1},yAxis:{type:"value",scale:!0,show:!1},series:[]};return o.series.push({name:"serie1",type:"graph",coordinateSystem:"cartesian2d",focusNodeAdjacency:!0,data:s,links:i,edgeSymbol:"none",lineStyle:{color:"#CACECE",width:2},itemStyle:{borderWidth:0,color:"#D06318"},label:{color:"#151C24",fontWeight:"bold"},symbolSize:10,animationDelay:function(t){return 10*t}}),this.routes.forEach((function(t){o.series.push({name:t.name,type:"graph",coordinateSystem:"cartesian2d",focusNodeAdjacency:!0,data:t.nodes.map((function(t){return Object(P["a"])(Object(P["a"])({},t),{itemStyle:{color:"black"}})})),links:t.links,edgeSymbol:["none","arrow"],edgeSymbolSize:10,legendHoverLink:!0,lineStyle:{color:"#0eeaea",curveness:.2,width:2},itemStyle:{borderWidth:0,color:"#D06318"},label:{color:"#151C24",fontWeight:"bold"},symbolSize:10,animationDelay:function(t){return 10*t}})})),o}}}),j=R,D=(a("715f"),Object(o["a"])(j,M,I,!1,null,"40461d69",null)),E=D.exports,$=(a("d3b7"),a("bc3a")),S=a.n($),O=S.a.create({baseURL:"http://localhost:8000/backend",timeout:5e3,headers:{"Content-Type":"application/json"}}),z=function(t){switch(t.response.status){case 400:console.error(t.response.status,t.message);break;default:console.error(t.response.status,t.message)}return Promise.reject(t)},T=function(t){switch(t.status){case 200:break;default:}return t};O.interceptors.response.use(T,z);var G=O,V="/api",L="".concat(V,"/cities/"),A=function(t){return G.get(L,{params:{limit:t}})},W=function(t){return G.get("".concat(L).concat(t,"/"))},q=function(t){return G.delete("".concat(L).concat(t))},B=function(t,e){return G.patch("".concat(L).concat(t,"/"),e)},U=function(t,e,a,s,n,i){return G.post(L,{name:t,n:e,p:a,l:s,g:n,graph:i,step:"step1"})},F=function(t){return G.post("".concat(L).concat(t,"/duplicate/"))},Q=function(t,e,a,s){return G.get("".concat(L,"build_graph_file_from_parameters/"),{params:{n:t,p:e,l:a,g:s}})},J=function(t){return G.get("".concat(L,"network_data_from_pajek_file/"),{params:{graph:t}})},H=function(t,e,a,s,n){return G.get("".concat(L).concat(t,"/build_matrix_file/"),{params:{y:e,a:a,alpha:s,beta:n}})},Y=function(){return G.get("".concat(V,"/recent_optimizations"),{})},K={getAllCities:A,getCity:W,createCity:U,updateCity:B,deleteCity:q,getRecentOptimizations:Y,duplicateCity:F,getPajekFile:Q,getGraphFromPajekFile:J,getMatrixFile:H},Z={name:"CityCard",mixins:[x],components:{CityGraph:E,Modal:g},props:{city:{type:Object,required:!0}},data:function(){return{showConfirmDeleteModal:!1,showConfirmDuplicateModal:!1}},methods:{duplicateCity:function(t){var e=this;K.duplicateCity(t).then((function(t){e.$emit("new-city",t.data)}))},deleteCity:function(t){var e=this;K.deleteCity(t).then((function(){e.$emit("erase-city",t)}))}}},X=Z,tt=Object(o["a"])(X,h,m,!1,null,"6be55338",null),et=tt.exports,at={name:"MyCities",components:{CityCard:et},data:function(){return{cities:[]}},methods:{setData:function(t){this.cities=t},updateCityList:function(t){this.cities.unshift(t)},eraseCityList:function(t){this.cities=this.cities.filter((function(e){return e.public_id!=t}))}},beforeRouteEnter:function(t,e,a){K.getAllCities().then((function(t){a((function(e){return e.setData(t.data)}))}))},beforeRouteUpdate:function(t,e,a){var s=this;this.cities=[],K.getAllCities().then((function(t){s.setData(t.data),a()}))}},st=at,nt=Object(o["a"])(st,u,p,!1,null,null,null),it=nt.exports,ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard"},[t._m(0),a("section",{staticClass:"recent-cities"},[a("div",{staticClass:"grid heading"},[a("h2",[t._v("Recently created cities")]),t.cities.length>0?[a("router-link",{staticClass:"btn",attrs:{to:{name:"MyCities"}}},[a("span",[t._v("View all")]),a("span",{staticClass:"material-icons"},[t._v("chevron_right")])])]:t._e()],2),t.cities.length>0?[a("div",{staticClass:"grid cities"},t._l(t.cities,(function(e){return a("CityCard",{key:e.public_id,attrs:{city:e},on:{"new-city":t.updateCityList,"erase-city":t.eraseCityList}})})),1)]:[a("div",{staticClass:"empty-box"},[a("p",[t._v("No cities found, start making your first city")]),a("router-link",{staticClass:"btn",attrs:{to:{name:"NewCity"}}},[a("span",[t._v("Add new city")]),a("span",{staticClass:"material-icons"},[t._v("add")])])],1)]],2),a("section",{staticClass:"last-optimization"},[a("h2",[t._v("Last optimizations")]),0==t.optimizations.length?[t._m(1)]:[a("div",{staticClass:"table"},[a("ul",{staticClass:"optimizations"},t._l(t.optimizations,(function(e){return a("li",{key:e.network_name,class:{ready:"finished"==e.optimization_status,error:"error"==e.optimization_status}},[a("div",{domProps:{innerHTML:t._s(t.getOptimizationIcon(e.optimization_status))}}),a("div",{staticClass:"name"},[a("h4",[t._v(t._s(e.network_name))]),a("span",{staticClass:"p-min"},[t._v(t._s(e.scene_name)+" - "+t._s(e.city_name))])]),a("div",{staticClass:"text"},[a("span",{staticClass:"p-min"},[t._v(t._s(e.optimization_status))])]),a("router-link",{staticClass:"btn neuro",attrs:{to:{name:"NetworkDetail",params:{cityPublicId:e.city_public_id,scenePublicId:e.scene_public_id,transportNetworkPublicId:e.network_public_id}}}},[a("span",[t._v("View details")]),a("span",{staticClass:"material-icons"},[t._v("chevron_right")])]),a("router-link",{staticClass:"btn neuro",attrs:{to:{name:"SceneDetail",params:{cityPublicId:e.city_public_id,scenePublicId:e.scene_public_id}}}},[a("span",[t._v("View scenes")]),a("span",{staticClass:"material-icons"},[t._v("chevron_right")])])],1)})),0)])]],2),a("footer",[a("div",{staticClass:"container full grid"},[a("div",{staticClass:"left-content"}),a("div",{staticClass:"right-content"},[a("router-link",{staticClass:"btn",attrs:{to:{name:"NewCity"}}},[a("span",[t._v("Add new city")]),a("span",{staticClass:"material-icons"},[t._v("add")])])],1)])])])},rt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("h1",[t._v("Dashboard")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"empty-box"},[a("p",[t._v("You have no optimization finished yet. Start its process from network list in a city scene.")])])}],lt={name:"Dashboard",components:{CityCard:et},data:function(){return{cities:[],optimizations:[]}},methods:{setData:function(t,e){this.cities=t,this.optimizations=e},getOptimizationIcon:function(t){var e="";switch(t){case"queued":e='<div class="icon"><span class="material-icons">schedule</span></div>';break;case"processing":e='<div class="loader">Loading...</div>';break;case"finished":e='<div class="icon"><span class="material-icons">check_circle</span></div>';break;case"error":e='<div class="icon"><span class="material-icons">error</span></div>';break;default:e='<div class="icon"><span class="material-icons">more_horiz</span></div>';break}return e},updateCityList:function(t){this.cities.unshift(t),this.cities.length>3&&this.cities.pop()},eraseCityList:function(){var t=this;K.getAllCities(3).then((function(e){t.cities=e.data}))}},beforeRouteEnter:function(t,e,a){S.a.all([K.getAllCities(3),K.getRecentOptimizations()]).then(S.a.spread((function(t,e){a((function(a){return a.setData(t.data,e.data)}))})))},beforeRouteUpdate:function(t,e,a){var s=this;this.city=[],this.optimizations=[],S.a.all([K.getAllCities(3),K.getRecentOptimizations()]).then(S.a.spread((function(t,e){s.setData(e.data,e.data),a()})))}},ct=lt,dt=Object(o["a"])(ct,ot,rt,!1,null,null,null),ut=dt.exports,pt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},ht=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"NotFound"},[a("h1",[t._v("Not Found")])])}],mt={name:"NotFound",components:{}},vt=mt,_t=Object(o["a"])(vt,pt,ht,!1,null,null,null),ft=_t.exports,bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"CityDetail"},[a("div",{staticClass:"header"},[a("h1",[t._v(t._s(t.city.name))]),a("span",{staticClass:"p-min"},[t._v("Created at "+t._s(t.getLocalDate(t.city.created_at)))])]),a("section",{staticClass:"city-details"},[a("div",{staticClass:"graph-container"},[a("CityGraph",{attrs:{network:t.city.network_descriptor}})],1),a("div",[a("h2",[t._v("City parameters")]),a("div",{staticClass:"table"},[t._m(0),a("table",{staticClass:"fixed"},[a("tbody",[t._m(1),a("tr",[a("td",[a("span",[t._v(t._s(t.city.n?t.city.n:"-"))])]),a("td",[a("span",[t._v(t._s(t.city.p?t.city.p:"-"))])]),a("td",[a("span",[t._v(t._s(t.city.l?t.city.l:"-"))])]),a("td",[a("span",[t._v(t._s(t.city.g?t.city.g:"-"))])])])])])]),a("button",{staticClass:"btn",on:{click:function(e){t.showMatrixModal=!0}}},[a("span",{staticClass:"material-icons"},[t._v("chevron_right")]),a("span",[t._v("View matrix")])])])]),a("section",[a("h2",[t._v("Scenes")]),t._m(2),0==t.city.scene_set.length?[a("div",{staticClass:"empty-box"},[a("p",[t._v("There are no scenes for this project. Start by creating a new one")]),a("router-link",{staticClass:"btn",attrs:{to:{name:"NewScene"}}},[a("span",[t._v("Add new scene")]),a("span",{staticClass:"material-icons"},[t._v("add")])])],1)]:[a("div",{staticClass:"table full"},[a("ul",{staticClass:"scenes-list"},t._l(t.city.scene_set,(function(e){return a("li",{key:e.public_id},[a("router-link",{staticClass:"name",attrs:{to:{name:"SceneDetail",params:{scenePublicId:e.public_id}}}},[a("h4",[t._v(t._s(e.name))]),a("span",{staticClass:"p-min"},[t._v(t._s(e.transportmode_set.length)+" transport modes, "+t._s(e.transportnetwork_set.length)+" transport networks")])]),a("div",{staticClass:"grid min"},[a("router-link",{staticClass:"btn icon",attrs:{to:{name:"SceneDetail",params:{scenePublicId:e.public_id}},tag:"button",alt:"Edit"}},[a("span",{staticClass:"material-icons"},[t._v("edit")])]),a("button",{staticClass:"btn icon",attrs:{alt:"Duplicate"},on:{click:function(a){return t.confirmSceneDuplicate(e)}}},[a("span",{staticClass:"material-icons"},[t._v("file_copy")])]),a("button",{staticClass:"btn icon",attrs:{alt:"Delete"},on:{click:function(a){return t.confirmSceneDelete(e)}}},[a("span",{staticClass:"material-icons"},[t._v("delete")])])],1)],1)})),0)])]],2),a("footer",[a("div",{staticClass:"container full grid"},[a("div",{staticClass:"left-content"}),null!==t.city.public_id?a("div",{staticClass:"right-content"},[a("router-link",{staticClass:"btn red",attrs:{to:{name:"EditCity",params:{cityPublicId:t.city.public_id}}}},[a("span",{staticClass:"material-icons"},[t._v("edit")]),a("span",[t._v("Edit city")])]),a("router-link",{staticClass:"btn",attrs:{to:{name:"NewScene"}}},[a("span",[t._v("Add new scene")]),a("span",{staticClass:"material-icons"},[t._v("add")])])],1):t._e()])]),t.showMatrixModal?a("Modal",{attrs:{showBase:!1},on:{close:function(e){t.showMatrixModal=!1}}},[a("template",{slot:"title"},[a("div",[a("h2",[t._v("OD Matrix")])])]),a("template",{slot:"content"},[a("div",{staticClass:"parameters-container"},[a("h4",[t._v("Matrix parameters")]),a("div",{staticClass:"table"},[a("table",[a("tbody",[a("tr",[a("th",[a("span",[t._v("𝑛")])]),a("th",[a("span",[t._v("𝑌[𝑝𝑎𝑥/h]")])]),a("th",[a("span",[t._v("a")])]),a("th",[a("span",[t._v("𝛼")])]),a("th",[a("span",[t._v("𝛽")])])]),a("tr",[a("td",[a("input",{attrs:{disabled:"true",type:"text"},domProps:{value:t.city.n}})]),a("td",[a("input",{attrs:{disabled:"true",type:"text"},domProps:{value:t.city.y}})]),a("td",[a("input",{attrs:{disabled:"true",type:"text"},domProps:{value:t.city.a}})]),a("td",[a("input",{attrs:{disabled:"true",type:"text"},domProps:{value:t.city.alpha}})]),a("td",[a("input",{attrs:{disabled:"true",type:"text"},domProps:{value:t.city.beta}})])])])])])]),a("CityDemand",{attrs:{matrixData:t.city.demand_matrix,header:t.city.demand_matrix_header}})],1)],2):t._e(),t.modalData.showModal?a("Modal",{attrs:{modalClasses:["warning"],showCancelButton:!0},on:{close:function(e){t.modalData.showModal=!1},cancel:function(e){t.modalData.showModal=!1},ok:t.processSceneAction}},[a("template",{slot:"title"},[a("div",[a("h4",[t._v(t._s(t.modalData.title))])])]),a("template",{slot:"content"},[t._v(t._s(t.modalData.content))])],2):t._e()],1)},wt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-title"},[a("h4",[t._v("Simetric city's parameters")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[a("span",[t._v("𝑛")])]),a("th",[a("span",[t._v("𝑃[𝑘𝑚]")])]),a("th",[a("span",[t._v("𝐿[𝑘𝑚]")])]),a("th",[a("span",[t._v("𝑔")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"subtitle"},[a("h4",[t._v("Transport modes and users settings for the city")])])}],gt=(a("99af"),"/api"),yt="".concat(gt,"/scenes/"),Ct=function(t){return G.get("".concat(yt).concat(t,"/"))},kt=function(t){return G.delete("".concat(yt).concat(t))},xt=function(t,e){return G.put("".concat(yt).concat(t,"/"),e)},Mt=function(t){return G.post(yt,t)},It=function(t){return G.post("".concat(yt).concat(t,"/duplicate/"))},Pt=function(t){return G.get("".concat(yt).concat(t,"/global_results/"),{})},Nt=function(t){return G.get("".concat(gt,"/validation/transport_mode/"),{params:t})},Rt=function(t,e,a){return G.put("".concat(yt).concat(t,"/transport_modes/").concat(e,"/"),a)},jt=function(t,e){return G.delete("".concat(yt).concat(t,"/transport_modes/").concat(e,"/"))},Dt=function(t,e){return G.post("".concat(yt).concat(t,"/transport_modes/"),e)},Et={getScene:Ct,createScene:Mt,updateScene:xt,deleteScene:kt,duplicateScene:It,checkTransportMode:Nt,updateTransportMode:Rt,deleteTransportMode:jt,createTransportMode:Dt,getGlobalResults:Pt},$t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"CityDemand"},[a("div",{staticClass:"table"},[a("table",{staticClass:"fixed"},[a("tbody",[a("tr",[a("th"),t._l(t.header,(function(e){return a("th",{key:e},[a("span",[t._v(t._s(e))])])}))],2),t._l(t.matrixData,(function(e,s){return a("tr",{key:s},[a("th",[a("span",[t._v(t._s(t.header[s]))])]),t._l(e,(function(e,n){return a("td",{key:s+"-"+n},[a("input",{attrs:{type:"text",readonly:"",disabled:""},domProps:{value:t.matrixData[s][n]}})])}))],2)}))],2)])])])},St=[],Ot={name:"CityDemand",props:{matrixData:{type:Array,required:!0},header:{type:Array,required:!0}}},zt=Ot,Tt=Object(o["a"])(zt,$t,St,!1,null,"ff186220",null),Gt=Tt.exports,Vt={name:"CityDetail",mixins:[x],components:{Modal:g,CityGraph:E,CityDemand:Gt},data:function(){return{showMatrixModal:!1,modalData:{title:"",showModal:!1,content:"",scene:null,action:""},city:{scene_set:[],network_descriptor:{nodes:[],edges:[]},demand_matrix_header:[],demand_matrix:[],public_id:null}}},methods:{setData:function(t){this.city=t},confirmSceneDelete:function(t){this.modalData.title="Delete Scene",this.modalData.content='Are you sure you want to delete scene "'.concat(t.name,'"?'),this.modalData.showModal=!0,this.modalData.scene=t,this.modalData.action="delete"},confirmSceneDuplicate:function(t){this.modalData.title="Duplicate Scene",this.modalData.content='Are you sure you want to duplicate scene "'.concat(t.name,'"?'),this.modalData.showModal=!0,this.modalData.scene=t,this.modalData.action="duplicate"},processSceneAction:function(){var t=this;switch(this.modalData.action){case"delete":Et.deleteScene(this.modalData.scene.public_id).then((function(e){console.log(e.data),t.city.scene_set=t.city.scene_set.filter((function(e){return e.public_id!=t.modalData.scene.public_id}))}));break;case"duplicate":Et.duplicateScene(this.modalData.scene.public_id).then((function(e){t.city.scene_set.push(e.data)}));break}}},beforeRouteEnter:function(t,e,a){K.getCity(t.params.cityPublicId).then((function(t){var e=t.data;null===e.demand_matrix?a({name:"NewCityStep2",params:{cityPublicId:e.public_id}}):a((function(t){return t.setData(e)}))}))},beforeRouteUpdate:function(t,e,a){var s=this;this.city={},K.getCity(t.params.cityPublicId).then((function(t){s.setData(t.data),a()}))}},Lt=Vt,At=Object(o["a"])(Lt,bt,wt,!1,null,null,null),Wt=At.exports,qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"NewCity step1"},[a("div",{staticClass:"header"},[a("h1",[t._v(t._s(t.pageTitle))])]),a("section",{staticClass:"step1-definition"},[a("div",{staticClass:"grid input-name"},[a("h2",[t._v("Name your city")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newCity.name,expression:"newCity.name"}],class:{error:null===t.newCity.name||""===t.newCity.name},attrs:{type:"text",placeholder:"Can't be empty"},domProps:{value:t.newCity.name},on:{input:function(e){e.target.composing||t.$set(t.newCity,"name",e.target.value)}}})]),a("h2",[t._v("Definition of city by parameters")]),a("div",{staticClass:"grid center subtitle"},[a("div",{staticClass:"grid center"},[a("h4",[t._v("Enter parameters")]),a("a",{staticClass:"icon-link",on:{click:function(e){t.showLegendModal=!0}}},[a("span",{staticClass:"material-icons"},[t._v("help")])])]),a("div",[a("button",{staticClass:"btn",on:{click:function(e){t.showImportModal=!0}}},[a("span",{staticClass:"material-icons"},[t._v("publish")]),a("span",[t._v("Import pajek file")])])])]),a("div",{staticClass:"table"},[t._m(0),a("table",[a("tbody",[t._m(1),a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newCity.n,expression:"newCity.n"}],ref:"nInput",class:{error:(null===t.newCity.n||""===t.newCity.n)&&t.enableParameters},attrs:{disabled:!t.enableParameters,type:"text",placeholder:"-"},domProps:{value:t.newCity.n},on:{input:function(e){e.target.composing||t.$set(t.newCity,"n",e.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newCity.p,expression:"newCity.p"}],class:{error:(null===t.newCity.p||""===t.newCity.p)&&t.enableParameters},attrs:{disabled:!t.enableParameters,type:"text",placeholder:"-"},domProps:{value:t.newCity.p},on:{input:function(e){e.target.composing||t.$set(t.newCity,"p",e.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newCity.l,expression:"newCity.l"}],class:{error:(null===t.newCity.l||""===t.newCity.l)&&t.enableParameters},attrs:{disabled:!t.enableParameters,type:"text",placeholder:"-"},domProps:{value:t.newCity.l},on:{input:function(e){e.target.composing||t.$set(t.newCity,"l",e.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newCity.g,expression:"newCity.g"}],class:{error:(null===t.newCity.g||""===t.newCity.g)&&t.enableParameters},attrs:{disabled:!t.enableParameters,type:"text",placeholder:"-"},domProps:{value:t.newCity.g},on:{input:function(e){e.target.composing||t.$set(t.newCity,"g",e.target.value)}}})])])])]),t.parameterValidator.show?a("Checker",{attrs:{isError:t.parameterValidator.isError,message:t.parameterValidator.message}}):t._e()],1),t.enableParameters?t._e():a("div",{staticClass:"flex flex-end"},[a("button",{staticClass:"btn",on:{click:function(e){t.showEditParameterModal=!0}}},[a("span",{staticClass:"material-icons"},[t._v("publish")]),a("span",[t._v("Edit parameters")])])]),a("button",{staticClass:"btn full main",attrs:{disabled:!t.enableParameters},on:{click:t.buildGraph}},[t._v(t._s(t.showEditorAndGraph?"Update":"Build")+" graph")])]),t.showEditorAndGraph?a("section",{staticClass:"step1-graph-editor"},[a("h2",[t._v("Definition of the city by nodes and arcs")]),a("h4",[t._v("Editor")]),a("div",{staticClass:"grid g2"},[a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newCity.graph,expression:"newCity.graph"}],staticClass:"editor-container",domProps:{value:t.newCity.graph},on:{input:[function(e){e.target.composing||t.$set(t.newCity,"graph",e.target.value)},t.pajekChange]}})]),a("div",{staticClass:"graph-container"},[a("CityGraph",{attrs:{network:t.newCity.network_descriptor}})],1)]),a("div",{staticClass:"checker"},[t.graphValidator.show?a("Checker",{attrs:{isError:t.graphValidator.isError,message:t.graphValidator.message}}):t._e(),a("button",{staticClass:"btn",on:{click:t.downloadPajekFile}},[a("span",{staticClass:"material-icons"},[t._v("get_app")]),a("span",[t._v("Download pajek")])])],1)]):t._e(),a("footer",[a("div",{staticClass:"container full grid"},[a("div",{staticClass:"left-content"}),a("div",{staticClass:"right-content"},[a("router-link",{staticClass:"btn",attrs:{to:{name:"Dashboard"}}},[a("span",[t._v("Cancel")]),a("span",{staticClass:"material-icons"},[t._v("chevron_left")])]),a("button",{staticClass:"btn",on:{click:t.updateCity}},[a("span",[t._v(t._s(t.nextButtonName))]),a("span",{staticClass:"material-icons"},[t._v("chevron_right")])])],1)])]),t.showLegendModal?a("Modal",{attrs:{showBase:!1},on:{close:function(e){t.showLegendModal=!1}}},[a("template",{slot:"title"},[a("h2",[t._v("Terminology")])]),a("template",{slot:"content"},[a("p",[t._v("The parameters 𝑛, 𝑃, 𝐿 and 𝑔 are required to build the city, the asymmetries are optional")]),a("div",{staticClass:"table"},[a("table",[a("tbody",[a("tr",[a("th",[a("span",[t._v("Symbol")])]),a("th",[a("span",[t._v("Unit")])]),a("th",[a("span",[t._v("Description")])])]),a("tr",[a("td",[a("span",[t._v("𝑛")])]),a("td"),a("td",[a("span",[t._v("Number of zones")])])]),a("tr",[a("td",[a("span",[t._v("𝑃")])]),a("td",[t._v("[𝑘𝑚]")]),a("td",[a("span",[t._v("Total width represented by each arc")])])]),a("tr",[a("td",[a("span",[t._v("𝐿")])]),a("td",[t._v("[𝑘𝑚]")]),a("td",[a("span",[t._v("Distance from SC to the geometrical city center C")])])]),a("tr",[a("td",[a("span",[t._v("𝑔")])]),a("td"),a("td",[a("span",[t._v("Ratio between the distances P-SC and SC- CBD")])])]),a("tr",[a("td",[a("span",[t._v("𝜂")])]),a("td"),a("td",[a("span",[t._v("Eccentricity of the CBD")])])])])])])])],2):t._e(),t.showWarningModal?a("Modal",{attrs:{showCancelButton:t.modalData.showCancelButton,modalClasses:["warning"]},on:{close:function(e){t.showWarningModal=!1}}},[a("template",{slot:"title"},[a("div",{staticClass:"icon"},[a("span",{staticClass:"material-icons"},[t._v("warning")])]),a("div",[a("h4",[t._v("Warning")])])]),a("p",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.modalData.message)},slot:"content"}),a("template",{slot:"close-button-name"},[t._v(t._s(t.modalData.closeButtonName))])],2):t._e(),t.showEditParameterModal?a("Modal",{attrs:{showCancelButton:!0,modalClasses:["warning"]},on:{cancel:function(e){t.showEditParameterModal=!1},close:function(e){t.showEditParameterModal=!1},ok:t.editParameterAction}},[a("template",{slot:"title"},[a("div",{staticClass:"icon"},[a("span",{staticClass:"material-icons"},[t._v("warning")])]),a("div",[a("h4",[t._v("Warning")])])]),a("p",{attrs:{slot:"content"},slot:"content"},[t._v("Editing city parameters will delete previous data. Do you want to continue?")]),a("template",{slot:"close-button-name"},[t._v("Proceed")])],2):t._e(),t.showImportModal?a("Modal",{on:{close:function(e){t.showImportModal=!1}}},[a("template",{slot:"title"},[a("h2",[t._v("Import pajek file")])]),a("template",{slot:"content"},[a("p",[t._v("The file must have this setup:")]),a("code",[t._v("*nodes n_of_nodes")]),a("p",[t._v("Then, after each row must have the next fields, separate by space:")]),a("code",[t._v("[id] [name] [x] [y] [type] [zone_id] [width]")])]),a("template",{slot:"base"},[a("FileReader",{on:{load:function(e){return t.importPajekFile(e)}}})],1)],2):t._e()],1)},Bt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-title"},[a("h4",[t._v("Simetric city's parameters")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[a("span",[t._v("𝑛")])]),a("th",[a("span",[t._v("𝑃[𝑘𝑚]")])]),a("th",[a("span",[t._v("𝐿[𝑘𝑚]")])]),a("th",[a("span",[t._v("𝑔")])])])}],Ut=a("21a6"),Ft=a.n(Ut),Qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"btn"},[t._m(0),t._v(" Choose file "),a("input",{attrs:{type:"file"},on:{change:t.loadTextFromFile}})])},Jt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"icon"},[a("span",{staticClass:"material-icons"},[t._v("publish")])])}],Ht={methods:{loadTextFromFile:function(t){var e=this,a=t.target.files[0],s=new FileReader;s.onload=function(t){return e.$emit("load",t.target.result)},s.readAsText(a)}}},Yt=Ht,Kt=Object(o["a"])(Yt,Qt,Jt,!1,null,"4cd61544",null),Zt=Kt.exports,Xt=a("53ca");function te(t){return null!==t&&("function"===typeof t||"object"===Object(Xt["a"])(t))}function ee(t){var e="";for(var a in t){var s=t[a];Array.isArray(s)?(e+="non_field_errors"!==a?"<b>".concat(a,":</b><ul>"):"<ul>",t[a].forEach((function(t){e+="<li>".concat(t,"</li>")})),e+="</ul>"):te(s)&&(e+=ee(s))}return e}var ae={methods:{getErrorMessage:function(t){var e="<b>Please correct the following error(s):</b><br /><br />";return e+=ee(t),e}}},se=ae,ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"grid checker-body",class:t.isError?"error":"ok"},[a("span",{staticClass:"material-icons icon"},[t._v(t._s(t.isError?"warning":"check"))]),a("span",{staticClass:"text"},[t._v(t._s(t.message))])])},ie=[],oe={name:"Checker",props:{isError:{type:Boolean,default:!1},message:{type:String,default:""}}},re=oe,le=Object(o["a"])(re,ne,ie,!1,null,"5a687625",null),ce=le.exports,de=a("b012"),ue={name:"NewCity",mixins:[se],components:{Modal:g,FileReader:Zt,CityGraph:E,Checker:ce},data:function(){return{pageTitle:"Add new city",nextButtonName:"Next",isNew:!0,enableParameters:!0,showEditParameterModal:!1,showWarningModal:!1,showLegendModal:!1,showImportModal:!1,parameterValidator:{show:!1,message:"",isError:!1},graphValidator:{show:!1,message:"",isError:!1},modalData:{showCancelButton:!0,closeButtonName:"Save",message:""},showEditorAndGraph:!1,newCity:{name:null,n:null,p:null,l:null,g:null,graph:null,network_descriptor:{nodes:[],edges:[]}}}},methods:{buildGraph:function(){var t=this,e=this.newCity.n,a=this.newCity.p,s=this.newCity.l,n=this.newCity.g;K.getPajekFile(e,a,s,n).then((function(e){t.newCity.graph=e.data.pajek,t.newCity.network_descriptor=e.data.network,t.showEditorAndGraph=!0,t.parameterValidator.message="Table correctly defined",t.parameterValidator.show=!0,t.parameterValidator.icon="check"})).catch((function(e){var a=e.response.data.detail;t.parameterValidator.message=a,t.parameterValidator.show=!0,t.parameterValidator.icon="warning"}))},updateCity:function(){var t=this,e=null;if(this.isNew)e=K.createCity(this.newCity.name,this.newCity.n,this.newCity.p,this.newCity.l,this.newCity.g,this.newCity.graph);else{var a={name:this.newCity.name,n:this.newCity.n,p:this.newCity.p,l:this.newCity.l,g:this.newCity.g,graph:this.newCity.graph,step:"step1"};e=K.updateCity(this.newCity.public_id,a)}e.then((function(e){t.$router.push({name:"NewCityStep2",params:{cityPublicId:e.data.public_id}})})).catch((function(e){var a=t.getErrorMessage(e.response.data);t.modalData.message=a,t.modalData.showCancelButton=!1,t.modalData.closeButtonName="OK",t.showWarningModal=!0}))},downloadPajekFile:function(){var t=new Blob([this.newCity.graph],{type:"text/plain;charset=utf-8"});Ft.a.saveAs(t,"city-graph.net")},importPajekFile:function(t){var e=this;K.getGraphFromPajekFile(t).then((function(a){e.newCity.n=a.data.n,e.newCity.p=a.data.p,e.newCity.l=a.data.l,e.newCity.g=a.data.g,e.newCity.graph=t,e.newCity.network_descriptor=a.data.network,e.showImportModal=!1,e.showEditorAndGraph=!0,e.enableParameters=!1})).catch((function(t){e.graphValidator.show=!0,e.graphValidator.isError=!0,e.graphValidator.message=t.response.data.detail}))},pajekChange:Object(de["debounce"])((function(){var t=this;K.getGraphFromPajekFile(this.newCity.graph).then((function(e){t.newCity.n=e.data.n,t.newCity.p=e.data.p,t.newCity.l=e.data.l,t.newCity.g=e.data.g,t.enableParameters=!1,t.newCity.network_descriptor=e.data.network,t.graphValidator.show=!0,t.graphValidator.isError=!1,t.graphValidator.message="File correctly defined"})).catch((function(e){t.graphValidator.show=!0,t.graphValidator.isError=!0,t.graphValidator.message=e.response.data.detail}))}),300),editParameterAction:function(){var t=this;this.enableParameters=!0,this.showEditorAndGraph=!1,this.newCity.graph=null,this.showEditParameterModal=!1,this.$nextTick((function(){t.$refs.nInput.focus()}))},setData:function(t){this.pageTitle="Edit city",this.nextButtonName="Save and continue",this.isNew=!1,this.newCity=t,null===this.newCity.n&&(this.enableParameters=!1),this.showEditorAndGraph=!0}},beforeRouteEnter:function(t,e,a){t.params.cityPublicId?K.getCity(t.params.cityPublicId).then((function(t){return a((function(e){return e.setData(t.data)}))})):a()},beforeRouteUpdate:function(t,e,a){var s=this;t.params.cityPublicId?(this.newCity={},K.getCity(t.params.cityPublicId).then((function(t){s.setData(t.data),a()}))):a()}},pe=ue,he=Object(o["a"])(pe,qt,Bt,!1,null,null,null),me=he.exports,ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"NewCityStep2"},[t._m(0),a("section",{staticClass:"definitions"},[a("div",[t._m(1),a("div",{staticClass:"subtitle"},[a("div",{staticClass:"grid center"},[a("h4",[t._v("Enter parameters (pick hour model)")]),a("a",{staticClass:"icon-link",on:{click:function(e){t.showLegendModal=!0}}},[a("span",{staticClass:"material-icons"},[t._v("help")])])])]),a("div",{staticClass:"table"},[a("table",[a("tbody",[t._m(2),a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.city.n,expression:"city.n"}],attrs:{disabled:!0,type:"text",placeholder:"-"},domProps:{value:t.city.n},on:{input:function(e){e.target.composing||t.$set(t.city,"n",e.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.city.y,expression:"city.y"}],class:{error:(null===t.city.y||""===t.city.y)&&t.enableParameters},attrs:{disabled:!t.enableParameters,type:"text",placeholder:"-"},domProps:{value:t.city.y},on:{input:function(e){e.target.composing||t.$set(t.city,"y",e.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.city.a,expression:"city.a"}],class:{error:(null===t.city.a||""===t.city.a)&&t.enableParameters},attrs:{disabled:!t.enableParameters,type:"text",placeholder:"-"},domProps:{value:t.city.a},on:{input:function(e){e.target.composing||t.$set(t.city,"a",e.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.city.alpha,expression:"city.alpha"}],class:{error:(null===t.city.alpha||""===t.city.alpha)&&t.enableParameters},attrs:{disabled:!t.enableParameters,type:"text",placeholder:"-"},domProps:{value:t.city.alpha},on:{input:function(e){e.target.composing||t.$set(t.city,"alpha",e.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.city.beta,expression:"city.beta"}],class:{error:(null===t.city.beta||""===t.city.beta)&&t.enableParameters},attrs:{disabled:!t.enableParameters,type:"text",placeholder:"-"},domProps:{value:t.city.beta},on:{input:function(e){e.target.composing||t.$set(t.city,"beta",e.target.value)}}})])])])])]),t.parameterValidator.show?a("Checker",{attrs:{isError:t.parameterValidator.isError,message:t.parameterValidator.message}}):t._e(),t.enableParameters?t._e():a("div",{staticClass:"flex flex-end"},[t._m(3)]),a("button",{staticClass:"btn full main",attrs:{disabled:!t.enableParameters},on:{click:t.buildMatrix}},[t._v(t._s(null===t.city.demand_matrix?"Render":"Update")+" OD matrix")])],1),a("div",{staticClass:"graph-container"},[a("CityGraph",{attrs:{network:t.city.network_descriptor}})],1)]),a("section",[a("div",{staticClass:"subtitle grid"},[a("h2",[t._v("OD Matrix")]),a("button",{staticClass:"btn",on:{click:function(e){t.showImportModal=!0}}},[a("span",{staticClass:"material-icons"},[t._v("publish")]),a("span",[t._v("Import CSV file")])])]),null===t.city.demand_matrix?a("div",{staticClass:"empty-box"},[a("p",[t._v("You have not generated your matrix yet, you can import data from csv file.")]),a("button",{staticClass:"btn",on:{click:function(e){t.showImportModal=!0}}},[a("span",{staticClass:"material-icons"},[t._v("publish")]),a("span",[t._v("Import CSV file")])])]):a("div",{staticClass:"table"},[a("table",[a("tbody",[a("tr",[a("th"),t._l(t.city.demand_matrix_header,(function(e){return a("th",{key:e},[a("span",[t._v(t._s(e))])])}))],2),t._l(t.city.demand_matrix,(function(e,s){return a("tr",{key:s},[a("th",[a("span",[t._v(t._s(t.city.demand_matrix_header[s]))])]),t._l(e,(function(e,n){return a("td",{key:s+"-"+n},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.city.demand_matrix[s][n],expression:"city.demand_matrix[i][j]"}],attrs:{type:"number",placeholder:"-"},domProps:{value:t.city.demand_matrix[s][n]},on:{input:function(e){e.target.composing||t.$set(t.city.demand_matrix[s],n,e.target.value)}}})])}))],2)}))],2)])])]),a("footer",[a("div",{staticClass:"container full grid"},[a("div",{staticClass:"left-content"}),null!==t.city.public_id?a("div",{staticClass:"right-content"},[a("router-link",{staticClass:"btn",attrs:{to:{name:"EditCity",params:{cityPublicId:t.city.public_id}}}},[a("span",{staticClass:"material-icons"},[t._v("chevron_left")]),a("span",[t._v("Back")])]),a("a",{staticClass:"btn",on:{click:t.updateCity}},[a("span",[t._v("Save city")]),a("span",{staticClass:"material-icons"},[t._v("check")])])],1):t._e()])]),t.showLegendModal?a("Modal",{attrs:{showBase:!1},on:{close:function(e){t.showLegendModal=!1}}},[a("template",{slot:"title"},[a("h2",[t._v("Terminology")])]),a("template",{slot:"content"},[a("div",{staticClass:"table"},[a("table",[a("tbody",[a("tr",[a("th",[a("span",[t._v("Symbol")])]),a("th",[a("span",[t._v("Unit")])]),a("th",[a("span",[t._v("Description")])])]),a("tr",[a("td",[a("span",[t._v("𝑛")])]),a("td"),a("td",[a("span",[t._v("Number of zones")])])]),a("tr",[a("td",[a("span",[t._v("𝑌")])]),a("td",[t._v("[𝑝𝑎𝑥/h]")]),a("td",[a("span",[t._v("Total patronage")])])]),a("tr",[a("td",[a("span",[t._v("a")])]),a("td"),a("td",[a("span",[t._v("Trips proportion that depart from the peripheries")])])]),a("tr",[a("td",[a("span",[t._v("𝛼")])]),a("td"),a("td",[a("span",[t._v("Trips proportion from P that go to the CBD")])])]),a("tr",[a("td",[a("span",[t._v("𝛽")])]),a("td"),a("td",[a("span",[t._v("Trips proportion from P to own SC")])])])])])])])],2):t._e(),t.showWarningModal?a("Modal",{attrs:{showCancelButton:t.modalData.showCancelButton,modalClasses:["warning"]},on:{close:function(e){t.showWarningModal=!1}}},[a("template",{slot:"title"},[a("div",{staticClass:"icon"},[a("span",{staticClass:"material-icons"},[t._v("warning")])]),a("div",[a("h4",[t._v("Warning")])])]),a("p",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.modalData.message)},slot:"content"}),a("template",{slot:"close-button-name"},[t._v(t._s(t.modalData.closeButtonName))])],2):t._e(),t.showImportModal?a("Modal",{on:{close:function(e){t.showImportModal=!1}}},[a("template",{slot:"title"},[a("h2",[t._v("Import demand matrix file")])]),a("template",{slot:"content"},[a("p",[t._v("The file must have this setup:")]),a("code",[t._v("*nodes n_of_nodes")]),a("p",[t._v("Then, after each row must have the next fields, separate by space:")]),a("code",[t._v("[id] [name] [x] [y] [type] [zone_id] [width]")])]),a("template",{slot:"base"},[a("FileReader",{on:{load:function(e){return t.importMatrixFile(e)}}})],1)],2):t._e()],1)},_e=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("h1",[t._v("Demand definition")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"subtitle"},[a("h2",[t._v("Define symmetric demand by parameters")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[a("span",[t._v("𝑛")])]),a("th",[a("span",[t._v("𝑌[𝑝𝑎𝑥/h]")])]),a("th",[a("span",[t._v("a")])]),a("th",[a("span",[t._v("𝛼")])]),a("th",[a("span",[t._v("𝛽")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn"},[a("span",{staticClass:"material-icons"},[t._v("edit")]),a("span",[t._v("Edit parameters")])])}],fe={name:"NewCityStep2",components:{Modal:g,FileReader:Zt,CityGraph:E,Checker:ce},data:function(){return{showImportModal:!1,showWarningModal:!1,showLegendModal:!1,enableParameters:!0,parameterValidator:{show:!1,message:"",isError:!1},modalData:{showCancelButton:!0,closeButtonName:"Save",message:""},city:{n:null,y:null,a:null,alpha:null,beta:null,demand_matrix:null,network_descriptor:{nodes:[],edges:[]},public_id:null,demand_matrix_header:[]}}},methods:{setData:function(t){this.city=t},updateCity:function(){var t=this,e={y:this.city.y,a:this.city.a,alpha:this.city.alpha,beta:this.city.beta,demand_matrix:this.city.demand_matrix,step:"step2"};K.updateCity(this.city.public_id,e).then((function(e){t.$router.push({name:"CityDetail",params:{cityPublicId:e.data.public_id}})})).catch((function(e){var a=e.response.data,s="<b>Please correct the following error(s):</b><br /><br />";for(var n in a)s+="<b>".concat(n,":</b><ul>"),a[n].forEach((function(t){s+="<li>".concat(t,"</li>")})),s+="</ul>";t.modalData.message=s,t.modalData.showCancelButton=!1,t.modalData.closeButtonName="OK",t.showWarningModal=!0}))},buildMatrix:function(){var t=this,e=this.city.y,a=this.city.a,s=this.city.alpha,n=this.city.beta;K.getMatrixFile(this.city.public_id,e,a,s,n).then((function(e){t.city.demand_matrix=e.data.demand_matrix,t.city.demand_matrix_header=e.data.demand_matrix_header,t.parameterValidator.message="Matrix correctly defined",t.parameterValidator.show=!0,t.parameterValidator.isError=!1})).catch((function(e){var a=e.response.data.detail;t.parameterValidator.message=a,t.parameterValidator.show=!0,t.parameterValidator.isError=!0}))},importMatrixFile:function(t){this.city.y=null,this.city.a=null,this.city.alpha=null,this.city.beta=null,this.city.demand_matrix=t,this.showImportModal=!1,this.showEditorAndGraph=!0,this.enableParameters=!1}},beforeRouteEnter:function(t,e,a){K.getCity(t.params.cityPublicId).then((function(t){return a((function(e){return e.setData(t.data)}))}))},beforeRouteUpdate:function(t,e,a){var s=this;this.city={},K.getCity(t.params.cityPublicId).then((function(t){s.setData(t.data),a()}))}},be=fe,we=Object(o["a"])(be,ve,_e,!1,null,null,null),ge=we.exports,ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"NewScene"},[t._m(0),a("section",{staticClass:"definitions"},[a("div",[a("div",{staticClass:"def-box"},[a("h2",[t._v("Name your scene")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.scene.name,expression:"scene.name"}],staticClass:"text-left",class:{error:null===t.scene.name||""===t.scene.name},attrs:{type:"text",placeholder:"Can't be empty"},domProps:{value:t.scene.name},on:{input:function(e){e.target.composing||t.$set(t.scene,"name",e.target.value)}}})]),a("div",[a("h2",[t._v("Define transport user")]),a("div",{staticClass:"subtitle"},[a("div",{staticClass:"grid"},[a("h4",[t._v("User settings")]),a("a",{staticClass:"icon-link",on:{click:function(e){t.showUserLegendModal=!0}}},[a("span",{staticClass:"material-icons"},[t._v("help")])])])]),a("div",{staticClass:"table"},[a("table",[a("tbody",[t._m(1),a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.scene.passenger.va,expression:"scene.passenger.va"}],class:{error:null===t.scene.passenger.va||""===t.scene.passenger.va},attrs:{type:"text",placeholder:"-"},domProps:{value:t.scene.passenger.va},on:{input:function(e){e.target.composing||t.$set(t.scene.passenger,"va",e.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.scene.passenger.pv,expression:"scene.passenger.pv"}],class:{error:null===t.scene.passenger.pv||""===t.scene.passenger.pv},attrs:{type:"text",placeholder:"-"},domProps:{value:t.scene.passenger.pv},on:{input:function(e){e.target.composing||t.$set(t.scene.passenger,"pv",e.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.scene.passenger.pw,expression:"scene.passenger.pw"}],class:{error:null===t.scene.passenger.pw||""===t.scene.passenger.pw},attrs:{type:"text",placeholder:"-"},domProps:{value:t.scene.passenger.pw},on:{input:function(e){e.target.composing||t.$set(t.scene.passenger,"pw",e.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.scene.passenger.pa,expression:"scene.passenger.pa"}],class:{error:null===t.scene.passenger.pa||""===t.scene.passenger.pa},attrs:{type:"text",placeholder:"-"},domProps:{value:t.scene.passenger.pa},on:{input:function(e){e.target.composing||t.$set(t.scene.passenger,"pa",e.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.scene.passenger.pt,expression:"scene.passenger.pt"}],class:{error:null===t.scene.passenger.pt||""===t.scene.passenger.pt},attrs:{type:"text",placeholder:"-"},domProps:{value:t.scene.passenger.pt},on:{input:function(e){e.target.composing||t.$set(t.scene.passenger,"pt",e.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.scene.passenger.spv,expression:"scene.passenger.spv"}],class:{error:null===t.scene.passenger.spv||""===t.scene.passenger.spv},attrs:{type:"text",placeholder:"-"},domProps:{value:t.scene.passenger.spv},on:{input:function(e){e.target.composing||t.$set(t.scene.passenger,"spv",e.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.scene.passenger.spw,expression:"scene.passenger.spw"}],class:{error:null===t.scene.passenger.spw||""===t.scene.passenger.spw},attrs:{type:"text",placeholder:"-"},domProps:{value:t.scene.passenger.spw},on:{input:function(e){e.target.composing||t.$set(t.scene.passenger,"spw",e.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.scene.passenger.spa,expression:"scene.passenger.spa"}],class:{error:null===t.scene.passenger.spa||""===t.scene.passenger.spa},attrs:{type:"text",placeholder:"-"},domProps:{value:t.scene.passenger.spa},on:{input:function(e){e.target.composing||t.$set(t.scene.passenger,"spa",e.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.scene.passenger.spt,expression:"scene.passenger.spt"}],class:{error:null===t.scene.passenger.spt||""===t.scene.passenger.spt},attrs:{type:"text",placeholder:"-"},domProps:{value:t.scene.passenger.spt},on:{input:function(e){e.target.composing||t.$set(t.scene.passenger,"spt",e.target.value)}}})])])])]),a("div",{staticClass:"ckecher"})])])]),a("div",{staticClass:"graph-container"},[a("CityGraph",{attrs:{network:t.scene.city.network_descriptor}})],1)]),a("section",{staticClass:"scene-modes"},[a("h2",[t._v("Define transportation modes")]),a("div",{staticClass:"subtitle"},[a("div",{staticClass:"grid"},[a("h4",[t._v("Add or remove all transportation modes that the city will have")]),a("a",{staticClass:"icon-link",on:{click:function(e){t.showTransportModeLegendModal=!0}}},[a("span",{staticClass:"material-icons"},[t._v("help")])])])]),null!==t.scene?a("TransportModeTable",{attrs:{scenePublicId:t.scene.public_id,rows:t.scene.transportmode_set},on:{"new-transportmode":t.addTransportMode,"erase-transportmode":t.removeTransportMode}}):t._e()],1),a("footer",[a("div",{staticClass:"container full grid"},[a("div",{staticClass:"left-content"}),a("div",{staticClass:"right-content"},[a("button",{staticClass:"btn",on:{click:t.updateScene}},[a("span",[t._v("Save and continue")]),a("span",{staticClass:"material-icons"},[t._v("chevron_right")])])])])]),a("UserLegend",{attrs:{show:t.showUserLegendModal},on:{close:function(e){t.showUserLegendModal=!1}}}),a("TransportModeLegend",{attrs:{show:t.showTransportModeLegendModal},on:{close:function(e){t.showTransportModeLegendModal=!1}}}),t.showWarningModal?a("Modal",{attrs:{showCancelButton:t.modalData.showCancelButton,modalClasses:["warning"]},on:{close:function(e){t.showWarningModal=!1}}},[a("template",{slot:"title"},[a("div",{staticClass:"icon"},[a("span",{staticClass:"material-icons"},[t._v("warning")])]),a("div",[a("h4",[t._v("Warning")])])]),a("p",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.modalData.message)},slot:"content"}),a("template",{slot:"close-button-name"},[t._v(t._s(t.modalData.closeButtonName))])],2):t._e()],1)},Ce=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("h1",[t._v("Add new scene")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[a("span",[t._v("𝑣𝑎"),a("br"),t._v("[𝑘𝑚/h]")])]),a("th",[a("span",[t._v("𝑝𝑣"),a("br"),t._v("[𝑈𝑆$/h]")])]),a("th",[a("span",[t._v("𝑝𝑤"),a("br"),t._v("[𝑈𝑆$/h]")])]),a("th",[a("span",[t._v("𝑝𝑎"),a("br"),t._v("[𝑈𝑆$/h]")])]),a("th",[a("span",[t._v("𝑝𝑡"),a("br"),t._v("[𝐸𝐼𝑉]")])]),a("th",[a("span",[t._v("𝑠𝑝𝑣"),a("br"),t._v("[𝑈𝑆$/h]")])]),a("th",[a("span",[t._v("𝑠𝑝𝑤"),a("br"),t._v("[𝑈𝑆$/h]")])]),a("th",[a("span",[t._v("𝑠𝑝𝑎"),a("br"),t._v("[𝑈𝑆$/h]")])]),a("th",[a("span",[t._v("𝑠𝑝𝑡"),a("br"),t._v("[𝐸𝐼𝑉]")])])])}],ke=(a("a434"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"UserLegend"},[t.show?a("Modal",{attrs:{showBase:!1},on:{close:function(e){return t.$emit("close")}}},[a("template",{slot:"title"},[a("h2",[t._v("Terminology")])]),a("template",{slot:"content"},[a("div",{staticClass:"table"},[a("table",[a("tbody",[a("tr",[a("th",[a("span",[t._v("Symbol")])]),a("th",[a("span",[t._v("Unit")])]),a("th",[a("span",[t._v("Description")])])]),a("tr",[a("td",[a("span",[t._v("𝑣𝑎")])]),a("td",[t._v("[𝑘𝑚/h]")]),a("td",[a("span",[t._v("Walking speed")])])]),a("tr",[a("td",[a("span",[t._v("𝑝𝑣")])]),a("td",[t._v("[𝑈𝑆$/h]")]),a("td",[a("span",[t._v("Value of in-vehicle time savings")])])]),a("tr",[a("td",[a("span",[t._v("𝑝𝑤")])]),a("td",[t._v("[𝑈𝑆$/h]")]),a("td",[a("span",[t._v("Value of waiting time savings")])])]),a("tr",[a("td",[a("span",[t._v("𝑝𝑎")])]),a("td",[t._v("[𝑈𝑆$/h]")]),a("td",[a("span",[t._v("Value of access time savings")])])]),a("tr",[a("td",[a("span",[t._v("𝑝𝑡")])]),a("td",[t._v("[𝐸𝐼𝑉]")]),a("td",[a("span",[t._v("Pure transfer penalty")])])]),a("tr",[a("td",[a("span",[t._v("𝑠𝑝𝑣")])]),a("td",[t._v("[𝑈𝑆$/h]")]),a("td",[a("span",[t._v("Subjective value of in- vehicle time savings")])])]),a("tr",[a("td",[a("span",[t._v("𝑠𝑝𝑤")])]),a("td",[t._v("[𝑈𝑆$/h]")]),a("td",[a("span",[t._v("Subjective value of waiting time savings")])])]),a("tr",[a("td",[a("span",[t._v("𝑠𝑝𝑎")])]),a("td",[t._v("[𝑈𝑆$/h]")]),a("td",[a("span",[t._v("Subjective value of access time savings")])])]),a("tr",[a("td",[a("span",[t._v("𝑠𝑝𝑡")])]),a("td",[t._v("[𝐸𝐼𝑉]")]),a("td",[a("span",[t._v("Subjective pure transfer penalty")])])])])])])])],2):t._e()],1)}),xe=[],Me={name:"UserLegend",components:{Modal:g},props:{show:{type:Boolean,default:!1,required:!0}}},Ie=Me,Pe=Object(o["a"])(Ie,ke,xe,!1,null,"5fd273c9",null),Ne=Pe.exports,Re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"TransportModeLegend"},[t.show?a("Modal",{attrs:{showBase:!1},on:{close:function(e){return t.$emit("close")}}},[a("template",{slot:"title"},[a("h2",[t._v("Terminology")])]),a("template",{slot:"content"},[a("div",{staticClass:"table"},[a("table",[a("tbody",[a("tr",[a("th",[a("span",[t._v("Symbol")])]),a("th",[a("span",[t._v("Unit")])]),a("th",[a("span",[t._v("Description")])])]),a("tr",[a("td",[a("span",[t._v("𝐶𝑜")])]),a("td",[t._v("[$/h − 𝑣𝑒h]")]),a("td",[a("span",[t._v("Unitary cost per vehicle per period of time")])])]),a("tr",[a("td",[a("span",[t._v("𝐶1")])]),a("td",[t._v("[$/h − 𝑝𝑎𝑥]")]),a("td",[a("span",[t._v("Unitary cost per seat per period of time")])])]),a("tr",[a("td",[a("span",[t._v("𝐶2")])]),a("td",[t._v("[$/h − 𝑘𝑚]")]),a("td",[a("span",[t._v("Unitary cost per km per period of time")])])]),a("tr",[a("td",[a("span",[t._v("𝜈")])]),a("td",[t._v("[𝑘𝑚/h]")]),a("td",[a("span",[t._v("Cruise speed")])])]),a("tr",[a("td",[a("span",[t._v("B&A")])]),a("td",[t._v("Sequential")]),a("td",[a("span",[t._v("Boarding and alighting way")])])]),a("tr",[a("td",[a("span",[t._v("𝑡")])]),a("td",[t._v("[𝑠/𝑝𝑎𝑥]")]),a("td",[a("span",[t._v("Boarding and alighting time")])])]),a("tr",[a("td",[a("span",[t._v("𝑓𝑚𝑎𝑥")])]),a("td",[t._v("[𝑣𝑒h/h]")]),a("td",[a("span",[t._v("Maximum frequency")])])]),a("tr",[a("td",[a("span",[t._v("𝐾𝑚𝑎𝑥")])]),a("td",[t._v("[𝑝𝑎𝑥/𝑣𝑒h]")]),a("td",[a("span",[t._v("Maximum vehicle size")])])]),a("tr",[a("td",[a("span",[t._v("𝜃")])]),a("td"),a("td",[a("span",[t._v("Regularity arrivals")])])]),a("tr",[a("td",[a("span",[t._v("𝑡𝑎𝑡")])]),a("td",[t._v("[𝑚𝑖𝑛]")]),a("td",[a("span",[t._v("Technological access time")])])]),a("tr",[a("td",[a("span",[t._v("𝐷")])]),a("td"),a("td",[a("span",[t._v("Parallel lines")])])])])])])])],2):t._e()],1)},je=[],De={name:"TransportModeLegend",components:{Modal:g},props:{show:{type:Boolean,default:!1,required:!0}}},Ee=De,$e=Object(o["a"])(Ee,Re,je,!1,null,"3faaf1b7",null),Se=$e.exports,Oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"TransportModeTable"},[a("div",{staticClass:"table"},[a("table",[a("tbody",[t._m(0),t._l(t.rows,(function(e,s){return a("tr",{key:s},[a("td",[t.extras[s].disabled?a("button",{staticClass:"btn icon",attrs:{alt:"delete"},on:{click:function(a){return t.showDeleteModal(e.name,s,e.public_id)}}},[a("span",{staticClass:"material-icons"},[t._v("delete")])]):t._e()]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"tm.name"}],class:{error:null===e.name||""===e.name},attrs:{type:"text",placeholder:"-",disabled:t.extras[s].disabled},domProps:{value:e.name},on:{input:function(a){a.target.composing||t.$set(e,"name",a.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.co,expression:"tm.co"}],class:{error:null===e.co||""===e.co},attrs:{type:"text",placeholder:"-",disabled:t.extras[s].disabled},domProps:{value:e.co},on:{input:function(a){a.target.composing||t.$set(e,"co",a.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.c1,expression:"tm.c1"}],class:{error:null===e.c1||""===e.c1},attrs:{type:"text",placeholder:"-",disabled:t.extras[s].disabled},domProps:{value:e.c1},on:{input:function(a){a.target.composing||t.$set(e,"c1",a.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.c2,expression:"tm.c2"}],class:{error:null===e.c2||""===e.c2},attrs:{type:"text",placeholder:"-",disabled:t.extras[s].disabled},domProps:{value:e.c2},on:{input:function(a){a.target.composing||t.$set(e,"c2",a.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.v,expression:"tm.v"}],class:{error:null===e.v||""===e.v},attrs:{type:"text",placeholder:"-",disabled:t.extras[s].disabled},domProps:{value:e.v},on:{input:function(a){a.target.composing||t.$set(e,"v",a.target.value)}}})]),a("td",[a("label",{staticClass:"switch"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.extras[s].bya,expression:"extras[index].bya"}],attrs:{type:"checkbox",disabled:t.extras[s].disabled},domProps:{checked:Array.isArray(t.extras[s].bya)?t._i(t.extras[s].bya,null)>-1:t.extras[s].bya},on:{change:function(e){var a=t.extras[s].bya,n=e.target,i=!!n.checked;if(Array.isArray(a)){var o=null,r=t._i(a,o);n.checked?r<0&&t.$set(t.extras[s],"bya",a.concat([o])):r>-1&&t.$set(t.extras[s],"bya",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.extras[s],"bya",i)}}}),a("div",{staticClass:"switch-body"})])]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.t,expression:"tm.t"}],class:{error:null===e.t||""===e.t},attrs:{type:"text",placeholder:"-",disabled:t.extras[s].disabled},domProps:{value:e.t},on:{input:function(a){a.target.composing||t.$set(e,"t",a.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.theta,expression:"tm.theta"}],class:{error:null===e.theta||""===e.theta},attrs:{type:"text",placeholder:"-",disabled:t.extras[s].disabled},domProps:{value:e.theta},on:{input:function(a){a.target.composing||t.$set(e,"theta",a.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.tat,expression:"tm.tat"}],class:{error:null===e.tat||""===e.tat},attrs:{type:"text",placeholder:"-",disabled:t.extras[s].disabled},domProps:{value:e.tat},on:{input:function(a){a.target.composing||t.$set(e,"tat",a.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.d,expression:"tm.d"}],class:{error:null===e.d||""===e.d},attrs:{type:"text",placeholder:"-",disabled:t.extras[s].disabled},domProps:{value:e.d},on:{input:function(a){a.target.composing||t.$set(e,"d",a.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.kmax,expression:"tm.kmax"}],class:{error:null===e.kmax||""===e.kmax},attrs:{type:"text",placeholder:"-",disabled:t.extras[s].disabled},domProps:{value:e.kmax},on:{input:function(a){a.target.composing||t.$set(e,"kmax",a.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.fmax,expression:"tm.fmax"}],class:{error:null===e.fmax||""===e.fmax},attrs:{type:"text",placeholder:"-",disabled:t.extras[s].disabled},domProps:{value:e.fmax},on:{input:function(a){a.target.composing||t.$set(e,"fmax",a.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.fini,expression:"tm.fini"}],class:{error:null===e.fini||""===e.fini},attrs:{type:"text",placeholder:"-",disabled:t.extras[s].disabled},domProps:{value:e.fini},on:{input:function(a){a.target.composing||t.$set(e,"fini",a.target.value)}}})])])}))],2)]),a("div",{staticClass:"checker"},[a("div",[t.checker.show?a("Checker",{attrs:{isError:t.checker.isError,message:t.checker.message}}):t._e()],1),t.isAddingRow?[a("div",{staticClass:"grid min"},[a("button",{staticClass:"btn red",on:{click:t.cancelAddRow}},[a("span",{staticClass:"material-icons"},[t._v("close")]),a("span",[t._v("Cancel")])]),a("button",{staticClass:"btn",on:{click:function(e){return t.saveRow(t.rows[t.rows.length-1],t.rows.length-1)}}},[a("span",{staticClass:"material-icons"},[t._v("check")]),a("span",[t._v("Save mode")])])])]:[a("button",{staticClass:"btn",on:{click:t.addRow}},[a("span",{staticClass:"material-icons"},[t._v("add")]),a("span",[t._v("Add mode")])])]],2)]),t.showDeleteConfirmationModal?a("Modal",{attrs:{showCancelButton:!0,modalClasses:["warning"]},on:{cancel:function(e){t.showDeleteConfirmationModal=!1},close:function(e){t.showDeleteConfirmationModal=!1},ok:t.deleteRow}},[a("template",{slot:"title"},[a("div",{staticClass:"icon"},[a("span",{staticClass:"material-icons"},[t._v("warning")])]),a("div",[a("h4",[t._v("Warning")])])]),a("p",{attrs:{slot:"content"},slot:"content"},[t._v('Are you sure you want to delete transport mode "'+t._s(t.deleteModalData.name)+'"')]),a("template",{slot:"close-button-name"},[t._v("Yes")]),a("template",{slot:"cancel-button-name"},[t._v("No")])],2):t._e()],1)},ze=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th"),a("th",[a("span",[t._v("Mode name")])]),a("th",[a("span",[t._v("𝐶𝑜"),a("br"),t._v("[$/h−𝑣𝑒h]")])]),a("th",[a("span",[t._v("𝐶1"),a("br"),t._v("[$/h−𝑝𝑎𝑥]")])]),a("th",[a("span",[t._v("𝐶2"),a("br"),t._v("[$/h−𝑘𝑚]")])]),a("th",[a("span",[t._v("𝜈"),a("br"),t._v("[𝑘𝑚/h]")])]),a("th",[a("span",[t._v("B&A"),a("br"),t._v("Sequential")])]),a("th",[a("span",[t._v("𝑡"),a("br"),t._v("[𝑠/𝑝𝑎𝑥]")])]),a("th",[a("span",[t._v("𝑓ini"),a("br"),t._v("[veh/hr]")])]),a("th",[a("span",[t._v("𝑓𝑚𝑎𝑥"),a("br"),t._v("[𝑣𝑒h/h]")])]),a("th",[a("span",[t._v("𝐾𝑚𝑎𝑥"),a("br"),t._v("[𝑝𝑎𝑥/𝑣𝑒h]")])]),a("th",[a("span",[t._v("𝜃")])]),a("th",[a("span",[t._v("𝑡𝑎𝑡"),a("br"),t._v("[𝑚𝑖𝑛]")])]),a("th",[a("span",[t._v("𝐷")])])])}],Te=(a("7039"),{name:"TransportModeLegend",components:{Modal:g,Checker:ce},props:{scenePublicId:{type:String,required:!1,default:null},rows:{type:Array,required:!0}},data:function(){return{isAddingRow:!1,deleteModalData:{name:null,index:null,publicId:null},checker:{show:!1,message:"",isError:!1},extras:[],showDeleteConfirmationModal:!1}},watch:{rows:function(t){if(t.length!==this.extras.length)for(var e=t.length-this.extras.length,a=t.length-e;a<t.length;a++)this.addExtraAttributes(t[a].bya)}},methods:{addExtraAttributes:function(t,e){e=!1!==e,this.extras.push({disabled:e,bya:Boolean(t)})},showDeleteModal:function(t,e,a){this.showDeleteConfirmationModal=!0,this.deleteModalData.name=t,this.deleteModalData.index=e,this.deleteModalData.publicId=a},addRow:function(){var t={name:null,co:null,c1:null,c2:null,v:null,bya:0,t:null,fini:null,fmax:null,kmax:null,theta:null,tat:null,d:null};this.rows.push(t),this.addExtraAttributes(t.bya,!1),this.isAddingRow=!0,this.checker.show=!1},sanitizeRow:function(t,e){var a=JSON.parse(JSON.stringify(t));return a.bya=this.extras[e].bya?1:0,a},saveRow:function(t,e){var a=this,s=this.sanitizeRow(t,e);null!==this.scenePublicId?Et.createTransportMode(this.scenePublicId,s).then((function(t){a.checker.isError=!1,a.checker.message="Transport mode is valid",a.checker.show=!0,s.public_id=t.data.public_id,a.isAddingRow=!1,a.rows.splice(e,1),a.extras[e].disabled=!0,a.$emit("new-transportmode",s)})).catch((function(t){var e=t.response.data,s=Object.getOwnPropertyNames(e)[0],n=e[s][0];"This field is required."===n&&(n="Fields can not be empty"),a.checker.isError=!0,a.checker.message=n,a.checker.show=!0})):Et.checkTransportMode(s).then((function(){a.checker.isError=!1,a.checker.message="Transport mode is valid",a.checker.show=!0,a.isAddingRow=!1,a.rows.splice(e,1),a.extras[e].disabled=!0,a.$emit("new-transportmode",s)})).catch((function(t){var e=t.response.data,s=Object.getOwnPropertyNames(e)[0],n=e[s][0];"This field is required."===n&&(n="Fields can not be empty"),a.checker.isError=!0,a.checker.message=n,a.checker.show=!0}))},cancelAddRow:function(){this.rows.pop(),this.extras.pop(),this.isAddingRow=!1,this.checker.show=!1},deleteRow:function(){var t=this,e=this.deleteModalData.index,a=this.rows[e],s=this.sanitizeRow(a,e);null!==this.scenePublicId&&Object.prototype.hasOwnProperty.call(a,"public_id")?Et.deleteTransportMode(this.scenePublicId,a.public_id).then((function(){t.extras.splice(e,1),t.$emit("erase-transportmode",s,e)})).catch((function(e){var a=t.getErrorMessage(e.response.data);t.checker.isError=!0,t.checker.message=a})):(this.extras.splice(e,1),this.$emit("erase-transportmode",s,e))}}}),Ge=Te,Ve=Object(o["a"])(Ge,Oe,ze,!1,null,"59294e8a",null),Le=Ve.exports,Ae={name:"NewScene",mixins:[se],components:{Modal:g,UserLegend:Ne,TransportModeLegend:Se,TransportModeTable:Le,CityGraph:E},data:function(){return{pageTitle:"Add new scene",isNew:!0,showWarningModal:!1,showUserLegendModal:!1,showTransportModeLegendModal:!1,showDeleteConfirmationModal:!1,modalData:{showCancelButton:!0,closeButtonName:"Ok",message:""},deleteModalData:{index:null,name:null,publicId:null},scene:{name:null,passenger:{va:null,pv:null,pw:null,pa:null,pt:null,spw:null,spa:null,spt:null,spv:null},transportmode_set:[],public_id:null,city:{network_descriptor:{nodes:[],edges:[]}}}}},methods:{setData:function(t){this.pageTitle="Edit scene",this.isNew=!1,this.scene=t},addTransportMode:function(t){this.scene.transportmode_set.push(t)},removeTransportMode:function(t,e){this.scene.transportmode_set.splice(e,1)},updateScene:function(){var t=this,e=JSON.parse(JSON.stringify(this.scene));e.city_public_id=this.$router.currentRoute.params.cityPublicId;var a=null;a=this.isNew?Et.createScene(e):Et.updateScene(this.scene.public_id,e),a.then((function(e){t.$router.push({name:"SceneDetail",params:{scenePublicId:e.data.public_id}})})).catch((function(e){var a=t.getErrorMessage(e.response.data);t.modalData.message=a,t.modalData.showCancelButton=!1,t.modalData.closeButtonName="OK",t.showWarningModal=!0}))}},beforeRouteEnter:function(t,e,a){t.params.scenePublicId?Et.getScene(t.params.scenePublicId).then((function(t){return a((function(e){return e.setData(t.data)}))})):K.getCity(t.params.cityPublicId).then((function(t){a((function(e){return e.scene.city.network_descriptor=t.data.network_descriptor}))}))},beforeRouteUpdate:function(t,e,a){var s=this;t.params.scenePublicId?(this.scene={},Et.getScene(t.params.scenePublicId).then((function(t){s.setData(t.data),a()}))):K.getCity(t.params.cityPublicId).then((function(t){s.scene.city.network_descriptor=t.data.network_descriptor,a()}))}},We=Ae,qe=Object(o["a"])(We,ye,Ce,!1,null,null,null),Be=qe.exports,Ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"SceneDetail"},[a("div",{staticClass:"header"},[a("h1",[t._v(t._s(t.scene.name))]),a("span",{staticClass:"p-min"},[t._v("Created at "+t._s(t.getLocalDate(t.scene.created_at)))])]),a("section",{staticClass:"city-details"},[a("div",{staticClass:"graph-container"},[a("CityGraph",{attrs:{network:t.scene.city.network_descriptor}})],1),a("div",[a("div",{staticClass:"def-box"},[a("h2",[t._v("City parameters")]),a("div",{staticClass:"grid min"},[a("button",{staticClass:"btn",on:{click:function(e){t.showMatrixModal=!0}}},[a("span",{staticClass:"material-icons"},[t._v("chevron_right")]),a("span",[t._v("View matrix")])])])]),a("div",[a("div",{staticClass:"grid title"},[a("h2",[t._v("User definition")]),a("a",{staticClass:"link-icon",on:{click:function(e){t.showUserLegendModal=!0}}},[a("span",{staticClass:"material-icons"},[t._v("help")])])]),a("div",{staticClass:"table"},[a("table",{staticClass:"fixed"},[a("tbody",[t._m(0),a("tr",[a("td",[a("input",{attrs:{type:"text",disabled:""},domProps:{value:t.scene.passenger.va}})]),a("td",[a("input",{attrs:{type:"text",disabled:""},domProps:{value:t.scene.passenger.pv}})]),a("td",[a("input",{attrs:{type:"text",disabled:""},domProps:{value:t.scene.passenger.pw}})]),a("td",[a("input",{attrs:{type:"text",disabled:""},domProps:{value:t.scene.passenger.pa}})]),a("td",[a("input",{attrs:{type:"text",disabled:""},domProps:{value:t.scene.passenger.pt}})]),a("td",[a("input",{attrs:{type:"text",disabled:""},domProps:{value:t.scene.passenger.spv}})]),a("td",[a("input",{attrs:{type:"text",disabled:""},domProps:{value:t.scene.passenger.spw}})]),a("td",[a("input",{attrs:{type:"text",disabled:""},domProps:{value:t.scene.passenger.spa}})]),a("td",[a("input",{attrs:{type:"text",disabled:""},domProps:{value:t.scene.passenger.spt}})])])])])])])])]),a("section",{staticClass:"transportation-mode"},[a("div",{staticClass:"grid title"},[a("h2",[t._v("Transport mode")]),a("a",{staticClass:"link-icon",on:{click:function(e){t.showTransportModeLegendModal=!0}}},[a("span",{staticClass:"material-icons"},[t._v("help")])])]),null!==t.scene?a("TransportModeTable",{attrs:{scenePublicId:t.scene.public_id,rows:t.scene.transportmode_set},on:{"new-transportmode":t.addTransportMode,"erase-transportmode":t.removeTransportMode}}):t._e()],1),a("section",{staticClass:"transportation-network"},[a("h2",[t._v("Transport network")]),t._m(1),0!==t.scene.transportnetwork_set.length?a("div",{staticClass:"table full"},[a("ul",{staticClass:"network-list"},[t._l(t.scene.transportnetwork_set,(function(e){return[a("TransportNetworkRow",{key:e.public_id,attrs:{cityPublicId:t.scene.city.public_id,scenePublicId:t.scene.public_id,transportNetwork:e},on:{"new-transport-network":t.newTransportNetwork,"erase-transport-network":t.removeTransportNetwork,"change-optimization-info":t.updateTransportNetwork}})]}))],2)]):a("div",{staticClass:"empty-box"},[a("p",[t._v("There are not transport networks for this scenario")]),a("router-link",{staticClass:"btn",attrs:{to:{name:"NewNetwork",params:{cityPublicId:t.scene.city.public_id,scenePublicId:t.scene.public_id}}}},[a("span",[t._v("Add new network")]),a("span",{staticClass:"material-icons"},[t._v("add")])])],1)]),a("footer",[a("div",{staticClass:"container full grid"},[a("div",{staticClass:"left-content"}),a("div",{staticClass:"right-content"},[null!==t.scene.city.public_id?a("router-link",{staticClass:"btn",attrs:{to:{name:"EditScene",params:{cityPublicId:t.scene.city.public_id,scenePublicId:t.scene.public_id}}}},[a("span",{staticClass:"material-icons"},[t._v("edit")]),a("span",[t._v("Edit scene")])]):t._e(),null!==t.scene.city.public_id?a("router-link",{staticClass:"btn",attrs:{to:{name:"GlobalResults",params:{cityPublicId:t.scene.city.public_id,scenePublicId:t.scene.public_id}}}},[a("span",[t._v("View global results")]),a("span",{staticClass:"material-icons"},[t._v("chevron_right")])]):t._e(),null!==t.scene.city.public_id?a("router-link",{staticClass:"btn",attrs:{to:{name:"NewNetwork",params:{cityPublicId:t.scene.city.public_id,scenePublicId:t.scene.public_id}}}},[a("span",[t._v("Add new network")]),a("span",{staticClass:"material-icons"},[t._v("add")])]):t._e()],1)])]),a("UserLegend",{attrs:{show:t.showUserLegendModal},on:{close:function(e){t.showUserLegendModal=!1}}}),a("TransportModeLegend",{attrs:{show:t.showTransportModeLegendModal},on:{close:function(e){t.showTransportModeLegendModal=!1}}}),t.showMatrixModal?a("Modal",{attrs:{showBase:!1},on:{close:function(e){t.showMatrixModal=!1}}},[a("template",{slot:"title"},[a("div",[a("h2",[t._v("OD Matrix")])])]),a("template",{slot:"content"},[a("div",{staticClass:"parameters-container"},[a("h4",[t._v("Matrix parameters")]),a("div",{staticClass:"table"},[a("table",[a("tbody",[a("tr",[a("th",[a("span",[t._v("𝑛")])]),a("th",[a("span",[t._v("𝑌[𝑝𝑎𝑥/h]")])]),a("th",[a("span",[t._v("a")])]),a("th",[a("span",[t._v("𝛼")])]),a("th",[a("span",[t._v("𝛽")])])]),a("tr",[a("td",[a("input",{attrs:{disabled:"true",type:"text"},domProps:{value:t.scene.city.n}})]),a("td",[a("input",{attrs:{disabled:"true",type:"text"},domProps:{value:t.scene.city.y}})]),a("td",[a("input",{attrs:{disabled:"true",type:"text"},domProps:{value:t.scene.city.a}})]),a("td",[a("input",{attrs:{disabled:"true",type:"text"},domProps:{value:t.scene.city.alpha}})]),a("td",[a("input",{attrs:{disabled:"true",type:"text"},domProps:{value:t.scene.city.beta}})])])])])])]),a("CityDemand",{attrs:{matrixData:t.scene.city.demand_matrix,header:t.scene.city.demand_matrix_header}})],1)],2):t._e()],1)},Fe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[a("span",[t._v("𝑣𝑎"),a("br"),t._v("[𝑘𝑚/h]")])]),a("th",[a("span",[t._v("𝑝𝑣"),a("br"),t._v("[𝑈𝑆$/h]")])]),a("th",[a("span",[t._v("𝑝𝑤"),a("br"),t._v("[𝑈𝑆$/h]")])]),a("th",[a("span",[t._v("𝑝𝑎"),a("br"),t._v("[𝑈𝑆$/h]")])]),a("th",[a("span",[t._v("𝑝𝑡"),a("br"),t._v("[𝐸𝐼𝑉]")])]),a("th",[a("span",[t._v("𝑠𝑝𝑣"),a("br"),t._v("[𝑈𝑆$/h]")])]),a("th",[a("span",[t._v("𝑠𝑝𝑤"),a("br"),t._v("[𝑈𝑆$/h]")])]),a("th",[a("span",[t._v("𝑠𝑝𝑎"),a("br"),t._v("[𝑈𝑆$/h]")])]),a("th",[a("span",[t._v("𝑠𝑝𝑡"),a("br"),t._v("[𝐸𝐼𝑉]")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"subtitle"},[a("h4",[t._v("Configuration of transport modes and users for the city")])])}],Qe=(a("c740"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{key:t.transportNetwork.public_id,class:[t.state.liClass]},[a("div",{domProps:{innerHTML:t._s(t.state.icon)}}),a("div",{staticClass:"network-list-name"},[a("h4",[t._v(t._s(t.transportNetwork.name))]),a("p",[a("b",[t._v(t._s(t.transportNetwork.route_set.length)+" routes")])])]),a("div",{staticClass:"status"},[a("span",{domProps:{innerHTML:t._s(t.state.label)}})]),a("button",{staticClass:"btn neuro",domProps:{innerHTML:t._s(t.state.buttonName)},on:{click:t.action}}),a("div",{staticClass:"grid min"},[a("router-link",{staticClass:"btn icon",attrs:{to:{name:"NetworkDetail",params:{cityPublicId:t.cityPublicId,scenePublicId:t.scenePublicId,transportNetworkPublicId:t.transportNetwork.public_id}},tag:"button",alt:"Edit"}},[a("span",{staticClass:"material-icons"},[t._v("edit")])]),a("button",{staticClass:"btn icon",attrs:{alt:"Duplicate"},on:{click:function(e){t.showConfirmDuplicateModal=!0}}},[a("span",{staticClass:"material-icons"},[t._v("file_copy")])]),a("button",{staticClass:"btn icon",attrs:{alt:"Delete"},on:{click:function(e){t.showConfirmDeleteModal=!0}}},[a("span",{staticClass:"material-icons"},[t._v("delete")])])],1),t.showConfirmDeleteModal?a("Modal",{attrs:{showCancelButton:!0,modalClasses:["warning"]},on:{cancel:function(e){t.showConfirmDeleteModal=!1},close:function(e){t.showConfirmDeleteModal=!1},ok:function(e){return t.deleteTransportNetwork()}}},[a("template",{slot:"title"},[a("div",{staticClass:"icon"},[a("span",{staticClass:"material-icons"},[t._v("warning")])]),a("div",[a("h4",[t._v("Warning")])])]),a("p",{attrs:{slot:"content"},slot:"content"},[t._v('Are you sure you want to delete transport network "'+t._s(t.transportNetwork.name)+'"?')]),a("template",{slot:"close-button-name"},[t._v("Proceed")])],2):t._e(),t.showConfirmDuplicateModal?a("Modal",{attrs:{showCancelButton:!0,modalClasses:["warning"]},on:{cancel:function(e){t.showConfirmDuplicateModal=!1},close:function(e){t.showConfirmDuplicateModal=!1},ok:function(e){return t.duplicateTransportNetwork()}}},[a("template",{slot:"title"},[a("div",{staticClass:"icon"},[a("span",{staticClass:"material-icons"},[t._v("warning")])]),a("div",[a("h4",[t._v("Warning")])])]),a("p",{attrs:{slot:"content"},slot:"content"},[t._v('Are you sure you want to duplicate transport network "'+t._s(t.transportNetwork.name)+'"?')]),a("template",{slot:"close-button-name"},[t._v("Proceed")])],2):t._e(),t.showConfirmRunOptimizationModal?a("Modal",{attrs:{showCancelButton:!0,modalClasses:["warning"]},on:{cancel:function(e){t.showConfirmRunOptimizationModal=!1},close:function(e){t.showConfirmRunOptimizationModal=!1},ok:t.runOptimization}},[a("template",{slot:"title"},[a("div",{staticClass:"icon"},[a("span",{staticClass:"material-icons"},[t._v("warning")])]),a("div",[a("h4",[t._v("Warning")])])]),a("p",{attrs:{slot:"content"},slot:"content"},[t._v('Are you sure you want to run optimization for transport network "'+t._s(t.transportNetwork.name)+'"?')]),a("template",{slot:"close-button-name"},[t._v("Yes")]),a("template",{slot:"cancel-button-name"},[t._v("No")])],2):t._e(),t.showConfirmCancelOptimizationModal?a("Modal",{attrs:{showCancelButton:!0,modalClasses:["warning"]},on:{cancel:function(e){t.showConfirmCancelOptimizationModal=!1},close:function(e){t.showConfirmCancelOptimizationModal=!1},ok:t.cancelOptimization}},[a("template",{slot:"title"},[a("div",{staticClass:"icon"},[a("span",{staticClass:"material-icons"},[t._v("warning")])]),a("div",[a("h4",[t._v("Warning")])])]),a("p",{attrs:{slot:"content"},slot:"content"},[t._v('Are you sure you want to cancel optimization for transport network "'+t._s(t.transportNetwork.name)+'"?')]),a("template",{slot:"close-button-name"},[t._v("Yes")]),a("template",{slot:"cancel-button-name"},[t._v("No")])],2):t._e(),t.showOptimizationErrorModal?a("Modal",{attrs:{showCancelButton:!1,modalClasses:["warning"]},on:{cancel:function(e){t.showOptimizationErrorModal=!1},close:function(e){t.showOptimizationErrorModal=!1},ok:function(e){t.showOptimizationErrorModal=!1}}},[a("template",{slot:"title"},[a("div",{staticClass:"icon"},[a("span",{staticClass:"material-icons"},[t._v("warning")])]),a("div",[a("h4",[t._v("Warning")])])]),a("p",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.errorMessage))])],2):t._e()],1)}),Je=[],He=(a("c975"),"/api"),Ye="".concat(He,"/transport_networks/"),Ke=function(t){return G.get("".concat(Ye).concat(t,"/"))},Ze=function(t){return G.delete("".concat(Ye).concat(t,"/"))},Xe=function(t,e,a){return G.patch("".concat(Ye).concat(t,"/"),{name:e,route_set:a})},ta=function(t,e,a){return G.post(Ye,{scene_public_id:t,name:e,route_set:a})},ea=function(t){return G.post("".concat(Ye).concat(t,"/duplicate/"))},aa=function(t,e){return G.post("".concat(Ye,"create_default_routes/"),{scene_public_id:t,default_routes:e})},sa=function(t){return G.post("".concat(Ye).concat(t,"/run_optimization/"))},na=function(t){return G.post("".concat(Ye).concat(t,"/cancel_optimization/"))},ia=function(t){return G.get("".concat(Ye).concat(t,"/results/"))},oa={getTransportNetwork:Ke,deleteTransportNetwork:Ze,updateTransportNetwork:Xe,createTransportNetwork:ta,duplicateTransportNetwork:ea,createDefaultRoutes:aa,runOptimization:sa,cancelOptimization:na,getResults:ia},ra={name:"TransportNetworkRow",components:{Modal:g},props:{transportNetwork:{type:Object,required:!0},cityPublicId:{type:String,required:!0},scenePublicId:{type:String,required:!0}},data:function(){return{showConfirmCancelOptimizationModal:!1,showConfirmRunOptimizationModal:!1,showConfirmDeleteModal:!1,showConfirmDuplicateModal:!1,showOptimizationErrorModal:!1,errorMessage:"",interval:null}},computed:{state:function(){var t='<div class="icon"><span class="material-icons">more_horiz</span></div>',e="",a="Not executed",s='<span>Process</span><span class="material-icons">add</span>';switch(this.transportNetwork.optimization_status){case"queued":t='<div class="icon"><span class="material-icons">schedule</span></div>',e="queued",a="Queued",s='<span>Remove</span><span class="material-icons">remove</span>';break;case"processing":t='<div class="loader">Loading...</div>',e="processing",a="Processing...",s='<span>Cancel</span><span class="material-icons">close</span>';break;case"finished":t='<div class="icon"><span class="material-icons">check_circle</span></div>',e="ok",a="Processed",s='<span>View results</span><span class="material-icons">chevron_right</span>';break;case"error":t='<div class="icon"><span class="material-icons">error</span></div>',e="error",a="Error",s='<span>View errors</span><span class="material-icons">chevron_right</span>';break}return{icon:t,liClass:e,buttonName:s,label:a}}},methods:{duplicateTransportNetwork:function(){var t=this;oa.duplicateTransportNetwork(this.transportNetwork.public_id).then((function(e){t.$emit("new-transport-network",e.data)}))},deleteTransportNetwork:function(){var t=this;oa.deleteTransportNetwork(this.transportNetwork.public_id).then((function(){t.$emit("erase-transport-network",t.transportNetwork.public_id)}))},action:function(){switch(this.transportNetwork.optimization_status){case"queued":this.showConfirmCancelOptimizationModal=!0;break;case"processing":this.showConfirmCancelOptimizationModal=!0;break;case"finished":this.$router.push({name:"NetworkResults",params:{cityPublicId:this.cityPublicId,scenePublicId:this.scenePublicId,transportNetworkPublicId:this.transportNetwork.public_id}});break;case"error":this.showOptimizationErrorModal=!0,this.errorMessage=this.transportNetwork.optimization_error_message;break;default:this.showConfirmRunOptimizationModal=!0;break}},runOptimization:function(){var t=this;oa.runOptimization(this.transportNetwork.public_id).then((function(e){t.$emit("change-optimization-info",e.data),t.runPeriodicCall()})).catch((function(e){t.errorMessage=e.response.data[0],t.showOptimizationErrorModal=!0}))},cancelOptimization:function(){var t=this;oa.cancelOptimization(this.transportNetwork.public_id).then((function(e){t.$emit("change-optimization-info",e.data),clearInterval(t.interval)})).catch((function(e){t.errorMessage=e.response.data[0],t.showOptimizationErrorModal=!0}))},runPeriodicCall:function(){var t=this;clearInterval(this.interval),this.interval=setInterval((function(){console.log('updated network "'.concat(t.transportNetwork.name,'" ...')),oa.getTransportNetwork(t.transportNetwork.public_id).then((function(e){["finished","error"].indexOf(e.data.optimization_status)>-1&&clearInterval(t.interval),t.$emit("change-optimization-info",e.data)}))}),5e3)}},created:function(){["queued","processing"].indexOf(this.transportNetwork.optimization_status)>-1&&this.runPeriodicCall()},beforeDestroy:function(){clearInterval(this.interval)}},la=ra,ca=Object(o["a"])(la,Qe,Je,!1,null,"2123522e",null),da=ca.exports,ua={name:"SceneDetail",mixins:[x],components:{CityGraph:E,CityDemand:Gt,Modal:g,UserLegend:Ne,TransportModeLegend:Se,TransportModeTable:Le,TransportNetworkRow:da},data:function(){return{showUserLegendModal:!1,showTransportModeLegendModal:!1,showMatrixModal:!1,scene:{name:null,created_at:null,passenger:{"𝑣𝑎":null,"𝑝𝑣":null,"𝑝𝑤":null,"𝑝𝑎":null,"𝑝𝑡":null,"𝑠𝑝𝑣":null,"𝑠𝑝𝑤":null,"𝑠𝑝𝑎":null,"𝑠𝑝𝑡":null},city:{n:null,y:null,a:null,alpha:null,beta:null,network_descriptor:{nodes:[],edges:[]},public_id:null},transportmode_set:[],transportnetwork_set:[]}}},methods:{setData:function(t){this.scene=t},addTransportMode:function(t){this.scene.transportmode_set.push(t)},removeTransportMode:function(t,e){this.scene.transportmode_set.splice(e,1)},newTransportNetwork:function(t){this.scene.transportnetwork_set.push(t)},removeTransportNetwork:function(t){this.scene.transportnetwork_set=this.scene.transportnetwork_set.filter((function(e){return e.public_id!=t}))},updateTransportNetwork:function(t){var e=this.scene.transportnetwork_set.findIndex((function(e){return e.public_id===t.public_id}));this.scene.transportnetwork_set[e]=t}},beforeRouteEnter:function(t,e,a){Et.getScene(t.params.scenePublicId).then((function(t){var e=t.data;a((function(t){return t.setData(e)}))}))},beforeRouteUpdate:function(t,e,a){var s=this;this.scene={},Et.getCity(t.params.cityPublicId).then((function(t){s.setData(t.data),a()}))}},pa=ua,ha=Object(o["a"])(pa,Ue,Fe,!1,null,null,null),ma=ha.exports,va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"GlobalResults"},[a("div",{staticClass:"header"},[a("h1",[t._v("Overall optimization results")]),a("p",[t._v(t._s(t.scene.name))])]),a("section",[a("div",{staticClass:"grid title"},[a("h2",[t._v("Processed networks")]),a("a",{staticClass:"icon-link",on:{click:function(e){t.showLegendModal=!0}}},[a("span",{staticClass:"material-icons"},[t._v("help")])])])]),a("section",[a("NetworkResultTable",{attrs:{rows:t.rows,cityPublicId:t.scene.city.public_id,scenePublicId:t.scene.public_id}})],1),a("footer",[a("div",{staticClass:"container full grid"},[a("div",{staticClass:"left-content"},[a("p",{staticClass:"info"},[t._v(t._s(t.rows.length)+" processed networks, "+t._s(t.rowsWithError)+" networks with errors")])]),a("div",{staticClass:"right-content"},[null!==t.scene.public_id?a("router-link",{staticClass:"btn",attrs:{to:{name:"SceneDetail",params:{scenePublicId:t.scene.public_id}}}},[a("span",{staticClass:"material-icons"},[t._v("chevron_left")]),a("span",[t._v("Back")])]):t._e(),a("button",{staticClass:"btn",on:{click:t.downloadData}},[a("span",[t._v("Download data")]),a("span",{staticClass:"material-icons"},[t._v("get_app")])])],1)])]),a("NetworkResultLegend",{attrs:{showLegendModal:t.showLegendModal},on:{close:function(e){t.showLegendModal=!1}}})],1)},_a=[],fa=(a("a15b"),a("13d5"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"NetworkResultTable"},[a("div",{staticClass:"grid title"},[a("h4",[t._v("Filter columns")]),a("div",{staticClass:"btn-filter"},[a("button",{staticClass:"btn neuro",class:{active:t.showCostValues},on:{click:function(e){t.showCostValues=!t.showCostValues}}},[t._v("Cost")]),a("button",{staticClass:"btn neuro",class:{active:t.showUserValues},on:{click:function(e){t.showUserValues=!t.showUserValues}}},[t._v("Users")]),a("button",{staticClass:"btn neuro",class:{active:t.showModeValues},on:{click:function(e){t.showModeValues=!t.showModeValues}}},[t._v("Modes")])])]),a("div",{staticClass:"table"},[a("table",{staticClass:"fixed"},[a("tbody",[a("tr",[t.showNetworkName?a("th",[a("span",[t._v("Network")])]):t._e(),t.showCostValues?a("th",[t._m(0)]):t._e(),t.showCostValues?a("th",[t._m(1)]):t._e(),t.showCostValues?a("th",[t._m(2)]):t._e(),t.showCostValues?a("th",[t._m(3)]):t._e(),t.showUserValues?a("th",[t._m(4)]):t._e(),t.showUserValues?a("th",[t._m(5)]):t._e(),t.showUserValues?a("th",[t._m(6)]):t._e(),t.showUserValues?a("th",[t._m(7)]):t._e(),t.rows.length>0&&t.showModeValues?[t._l(t.rows[0].optimizationresultpermode_set,(function(e,s){return[a("th",{key:s},[a("a",[a("span",[t._v("𝐵"),a("br"),t._v(t._s(e.transport_mode))]),a("span",{staticClass:"btn-filter-column material-icons"},[t._v("unfold_more")])])]),a("th",{key:s+1e3},[a("a",[a("span",[t._v("𝐾"),a("br"),t._v(t._s(e.transport_mode))]),a("span",{staticClass:"btn-filter-column material-icons"},[t._v("unfold_more")])])]),a("th",{key:s+2e3},[a("a",[a("span",[t._v("𝑙"),a("br"),t._v(t._s(e.transport_mode))]),a("span",{staticClass:"btn-filter-column material-icons"},[t._v("unfold_more")])])])]}))]:t._e()],2),t._l(t.rows,(function(e,s){return a("tr",{key:s},[t.showNetworkName?a("td",[a("router-link",{attrs:{to:{name:"NetworkDetail",params:{cityPublicId:t.cityPublicId,scenePublicId:t.scenePublicId,transportNetworkPublicId:e.public_id}},alt:"Detail"}},[t._v(t._s(e.name))])],1):t._e(),t.showCostValues?a("td",[e.optimizationresult?a("span",[t._v(t._s(e.optimizationresult.vrc.toLocaleString()))]):t._e()]):t._e(),t.showCostValues?a("td",[e.optimizationresult?a("span",[t._v(t._s(e.optimizationresult.co.toLocaleString()))]):t._e()]):t._e(),t.showCostValues?a("td",[e.optimizationresult?a("span",[t._v(t._s(e.optimizationresult.ci.toLocaleString()))]):t._e()]):t._e(),t.showCostValues?a("td",[e.optimizationresult?a("span",[t._v(t._s(e.optimizationresult.cu.toLocaleString()))]):t._e()]):t._e(),t.showUserValues?a("td",[e.optimizationresult?a("span",[t._v(t._s(e.optimizationresult.tv.toLocaleString()))]):t._e()]):t._e(),t.showUserValues?a("td",[e.optimizationresult?a("span",[t._v(t._s(e.optimizationresult.tw.toLocaleString()))]):t._e()]):t._e(),t.showUserValues?a("td",[e.optimizationresult?a("span",[t._v(t._s(e.optimizationresult.ta.toLocaleString()))]):t._e()]):t._e(),t.showUserValues?a("td",[e.optimizationresult?a("span",[t._v(t._s(e.optimizationresult.t.toLocaleString()))]):t._e()]):t._e(),t.showModeValues?[t._l(e.optimizationresultpermode_set,(function(e,s){return[a("td",{key:s},[a("span",[t._v(t._s(e.b.toLocaleString()))])]),a("td",{key:s+1e3},[a("span",[t._v(t._s(e.k.toLocaleString()))])]),a("td",{key:s+2e3},[a("span",[t._v(t._s(e.l.toLocaleString()))])])]}))]:t._e()],2)}))],2)])])])}),ba=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",[a("span",[t._v("𝑉𝑅𝐶"),a("br"),t._v("[𝑈𝑆$/h − 𝑝𝑎𝑥]")]),a("span",{staticClass:"btn-filter-column material-icons"},[t._v("unfold_more")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",[a("span",[t._v("𝐶𝑂"),a("br"),t._v("[𝑈𝑆$/h − 𝑝𝑎𝑥]")]),a("span",{staticClass:"btn-filter-column material-icons"},[t._v("unfold_more")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",[a("span",[t._v("𝐶𝐼"),a("br"),t._v("[𝑈𝑆$/h − 𝑝𝑎𝑥]")]),a("span",{staticClass:"btn-filter-column material-icons"},[t._v("unfold_more")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",[a("span",[t._v("𝐶𝑈"),a("br"),t._v("[𝑈𝑆$/h − 𝑝𝑎𝑥]")]),a("span",{staticClass:"btn-filter-column material-icons"},[t._v("unfold_more")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",[a("span",[t._v("𝑡v"),a("br"),t._v("[𝑚𝑖𝑛/𝑝𝑎𝑥]")]),a("span",{staticClass:"btn-filter-column material-icons"},[t._v("unfold_more")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",[a("span",[t._v("𝑡w"),a("br"),t._v("[𝑚𝑖𝑛/𝑝𝑎𝑥]")]),a("span",{staticClass:"btn-filter-column material-icons"},[t._v("unfold_more")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",[a("span",[t._v("𝑡a"),a("br"),t._v("[𝑚𝑖𝑛/𝑝𝑎𝑥]")]),a("span",{staticClass:"btn-filter-column material-icons"},[t._v("unfold_more")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",[a("span",[t._v("𝑇"),a("br"),t._v("[𝑡𝑟𝑎𝑛𝑠/𝑝𝑎𝑥]")]),a("span",{staticClass:"btn-filter-column material-icons"},[t._v("unfold_more")])])}],wa={name:"NetworkResultTable",props:{rows:{type:Array,required:!0},cityPublicId:{type:String,required:!1,default:""},scenePublicId:{type:String,required:!1,default:""},showNetworkName:{type:Boolean,required:!1,default:!0}},data:function(){return{showCostValues:!0,showUserValues:!0,showModeValues:!0}}},ga=wa,ya=Object(o["a"])(ga,fa,ba,!1,null,"222b6640",null),Ca=ya.exports,ka=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"NetworkResultLegend"},[t.showLegendModal?a("Modal",{attrs:{showBase:!1},on:{close:function(e){return t.$emit("close")}}},[a("template",{slot:"title"},[a("h2",[t._v("Terminology")])]),a("template",{slot:"content"},[a("div",{staticClass:"table"},[a("table",[a("tbody",[a("tr",[a("th",[a("span",[t._v("Symbol")])]),a("th",[a("span",[t._v("Unit")])]),a("th",[a("span",[t._v("Description")])])]),a("tr",[a("td",[a("span",[t._v("𝑉𝑅𝐶")])]),a("td",[t._v("[𝑈𝑆$/h − 𝑝𝑎𝑥]")]),a("td",[a("span",[t._v("Total cost")])])]),a("tr",[a("td",[a("span",[t._v("𝐶𝑂")])]),a("td",[t._v("[𝑈𝑆$/h − 𝑝𝑎𝑥]")]),a("td",[a("span",[t._v("Operators cost")])])]),a("tr",[a("td",[a("span",[t._v("𝐶𝐼")])]),a("td",[t._v("[𝑈𝑆$/h − 𝑝𝑎𝑥]")]),a("td",[a("span",[t._v("Infrastructure cost")])])]),a("tr",[a("td",[a("span",[t._v("𝐶𝑈")])]),a("td",[t._v("[𝑈𝑆$/h − 𝑝𝑎𝑥]")]),a("td",[a("span",[t._v("Users cost")])])]),a("tr",[a("td",[a("span",[t._v("𝑡v")])]),a("td",[a("span",[t._v("[𝑚𝑖𝑛/𝑝𝑎𝑥]")])]),a("td",[a("span",[t._v("Travel time")])])]),a("tr",[a("td",[a("span",[t._v("𝑡w")])]),a("td",[a("span",[t._v("[𝑚𝑖𝑛/𝑝𝑎𝑥]")])]),a("td",[a("span",[t._v("Regularity arrivals")])])]),a("tr",[a("td",[a("span",[t._v("𝑡𝑎")])]),a("td",[t._v("[𝑡𝑟𝑎𝑛𝑠/𝑝𝑎𝑥]")]),a("td",[a("span",[t._v("Transfers")])])]),a("tr",[a("td",[a("span",[t._v("𝐵")])]),a("td",[t._v("[𝑣𝑒h]")]),a("td",[a("span",[t._v("Vehicle fleet")])])]),a("tr",[a("td",[a("span",[t._v("𝐾")])]),a("td",[t._v("[𝑝𝑎𝑥/𝑣𝑒h]")]),a("td",[a("span",[t._v("Design boarding size")])])]),a("tr",[a("td",[a("span",[t._v("𝑙")])]),a("td",[t._v("[𝑙𝑖𝑛𝑒]")]),a("td",[a("span",[t._v("Number of lines")])])])])])])])],2):t._e()],1)},xa=[],Ma={name:"NetworkResultTable",components:{Modal:g},props:{showLegendModal:{type:Boolean,default:!1,required:!0}}},Ia=Ma,Pa=Object(o["a"])(Ia,ka,xa,!1,null,"9a48046a",null),Na=Pa.exports,Ra={name:"GlobalResults",components:{NetworkResultTable:Ca,NetworkResultLegend:Na},data:function(){return{showLegendModal:!1,scene:{name:"",public_id:null},rows:[],rowsWithError:0}},methods:{setData:function(t){var e=this;this.scene=t.scene,this.rows=t.rows.filter((function(t){return null!==t.optimization_error_message&&(e.rowsWithError+=1),null!==t.optimizationresult}))},downloadData:function(){var t=["Network","VRC","CO","CI","CU","tv","tw","ta","T"],e=this.rows.map((function(e,a){var s=e.optimizationresultpermode_set.reduce((function(e,s){return 0===a&&(t=t.concat(["B-"+s.transport_mode,"K-"+s.transport_mode,"l-"+s.transport_mode])),e.concat([s.b,s.k,s.l])}),[]);return["\n",e.name,e.optimizationresult.vrc,e.optimizationresult.co,e.optimizationresult.ci,e.optimizationresult.cu,e.optimizationresult.tv,e.optimizationresult.tw,e.optimizationresult.ta,e.optimizationresult.t].concat(s)})).reduce((function(t,e){return t+e.join(",")}),t),a=new Blob([e],{type:"text/plain;charset=utf-8"});Ft.a.saveAs(a,"result-data.csv")}},beforeRouteEnter:function(t,e,a){t.params.scenePublicId&&Et.getGlobalResults(t.params.scenePublicId).then((function(t){a((function(e){return e.setData(t.data)}))}))},beforeRouteUpdate:function(t,e,a){var s=this;t.params.scenePublicId&&Et.getGlobalResults(t.params.scenePublicId).then((function(t){s.setData(t.data),a()}))}},ja=Ra,Da=Object(o["a"])(ja,va,_a,!1,null,null,null),Ea=Da.exports,$a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"NewNetwork"},[a("div",{staticClass:"header"},[a("h1",[t._v(t._s(t.network.public_id?"Edit":"New")+" transportation network")]),a("p",[t._v(t._s(t.scene.name))])]),a("section",{staticClass:"new-network"},[a("div",{staticClass:"grid input-name"},[a("h2",[t._v("Name your network")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.network.name,expression:"network.name"}],staticClass:"text-left",class:{error:null===t.network.name||""===t.network.name},attrs:{type:"text",placeholder:"Can't be empty"},domProps:{value:t.network.name},on:{input:function(e){e.target.composing||t.$set(t.network,"name",e.target.value)}}})])]),a("section",{staticClass:"network-information"},[a("h2",[t._v("Transport network information")]),a("div",{staticClass:"subtitle"},[a("div",{staticClass:"grid"},[a("h4",[t._v("Add details of each transit line")]),a("a",{staticClass:"icon-link",on:{click:function(e){t.showLegendModal=!0}}},[a("span",{staticClass:"material-icons"},[t._v("help")])])])]),a("div",{staticClass:"line-details"},[a("div",[a("div",{staticClass:"grid search-bar"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],attrs:{type:"search",placeholder:"search by Line ID ..."},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}}),a("button",{staticClass:"btn neuro",class:{active:t.viewAll},attrs:{disabled:0===t.network.route_set.length},on:{click:t.setViewAll}},[a("span",{staticClass:"material-icons"},[t._v("visibility")]),a("span",[t._v("View all")])])]),0===t.network.route_set.length?a("div",{staticClass:"empty-box"},[a("p",[t._v("There is not defined route in this network. You can add a new one or create predefined tours")]),a("div",{staticClass:"grid"},[a("button",{staticClass:"btn",on:{click:t.addEmptyRoute}},[a("span",{staticClass:"material-icons"},[t._v("add")]),a("span",[t._v("Add transit line")])]),a("button",{staticClass:"btn",on:{click:function(e){t.showDefaultRouteCreatorModal=!0}}},[a("span",[t._v("Add default transit lines")]),a("span",{staticClass:"material-icons"},[t._v("format_list_bulleted")])])])]):a("div",{staticClass:"linebox-container"},[t._l(t.resultQuery,(function(e,s){return[a("RouteCard",{key:s,attrs:{route:e,transportModeSet:t.scene.transportmode_set,showInGraphI:t.routeVisibility[e.id]["showInGraphI"],showInGraphR:t.routeVisibility[e.id]["showInGraphR"],checkerMessage:t.checkerMessages[s]},on:{"update-visibility":t.updateVisibility,"erase-route":t.deleteRoute,"node-sequence-change":t.updateGraph}})]}))],2)]),a("div",{staticClass:"graph-container"},[a("CityGraph",{attrs:{network:t.scene.city.network_descriptor,edgeWeights:t.edgeWeights,routes:t.graphRoutes,showNodeId:!0}})],1)])]),a("DefaultRouteCreator",{attrs:{route_set:t.network.route_set,transportmode_set:t.scene.transportmode_set,scene_public_id:t.scene.public_id,show:t.showDefaultRouteCreatorModal},on:{close:function(e){t.showDefaultRouteCreatorModal=!1},"routes-created":t.createRoutes}}),t.showLegendModal?a("Modal",{attrs:{showBase:!1},on:{close:function(e){t.showLegendModal=!1}}},[a("template",{slot:"title"},[a("h2",[t._v("Terminology")])]),a("template",{slot:"content"},[a("div",{staticClass:"table"},[a("table",[a("tbody",[a("tr",[a("th",[a("span",[t._v("Name")])]),a("th",[a("span",[t._v("Unit")])]),a("th",{attrs:{colspan:"2"}},[a("span",[t._v("Description")])])]),a("tr",[a("td",[a("span",[t._v("Line ID")])]),a("td",[a("span",[t._v("Any")])]),a("td",{attrs:{colspan:"2"}},[a("span",[t._v("Name for the specific transit line")])])]),a("tr",[a("td",[a("span",[t._v("Mode")])]),a("td",[a("span",[t._v("Select")])]),a("td",{attrs:{colspan:"2"}},[a("span",[t._v("Select one of the predefined modes")])])]),a("tr",[a("td",[a("span",[t._v("Dir")])]),a("td",[a("span",[t._v("I o R")])]),a("td",{attrs:{colspan:"2"}},[a("span",[t._v('I to "in route" direction, R to "return" direction')])])]),a("tr",[a("td",[a("span",[t._v("Node sequence")])]),a("td",[a("span",[t._v("List[Number]")])]),a("td",{attrs:{colspan:"2"}},[a("span",[t._v('Specific nodes id separated by "," where the transit line will travel')])])]),a("tr",[a("td",[a("span",[t._v("Stop sequence")])]),a("td",[a("span",[t._v("List[Number]")])]),a("td",{attrs:{colspan:"2"}},[a("span",[t._v('Specific nodes id separated by "," where the transit line will stop')])])]),a("tr",[a("td",[a("span",[t._v("Graph visibility")])]),a("td",[a("span",{staticClass:"material-icons color-link"},[t._v("visibility")])]),a("td",{attrs:{colspan:"2"}},[a("span",[t._v("Turn on/off to show the current line in the graph view")])])])])])])])],2):t._e(),a("footer",[a("div",{staticClass:"container full grid"},[a("div",{staticClass:"left-content"},[a("button",{staticClass:"btn",on:{click:t.addEmptyRoute}},[a("span",{staticClass:"material-icons"},[t._v("add")]),a("span",[t._v("Add new transit line")])]),a("p",{staticClass:"info"},[t._v(t._s(t.network.route_set.length)+" transit lines")])]),a("div",{staticClass:"right-content"},[t.scene.city.public_id?a("router-link",{staticClass:"btn",attrs:{to:{name:"SceneDetail",params:{cityPublicId:t.scene.city.public_id,scenePublicId:t.scene.public_id}}}},[a("span",{staticClass:"material-icons"},[t._v("chevron_left")]),a("span",[t._v("Back")])]):t._e(),a("button",{staticClass:"btn",on:{click:function(e){t.showDefaultRouteCreatorModal=!0}}},[a("span",[t._v("Add default transit lines")]),a("span",{staticClass:"material-icons"},[t._v("format_list_bulleted")])]),a("button",{staticClass:"btn",on:{click:t.updateTransportNetwork}},[a("span",[t._v("Save Network")]),a("span",{staticClass:"material-icons"},[t._v("chevron_right")])])],1)])]),t.showWarningModal?a("Modal",{attrs:{showCancelButton:!1,modalClasses:["warning"]},on:{close:function(e){t.showWarningModal=!1}}},[a("template",{slot:"title"},[a("div",{staticClass:"icon"},[a("span",{staticClass:"material-icons"},[t._v("warning")])]),a("div",[a("h4",[t._v("Warning")])])]),a("p",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.warningModalMessage)},slot:"content"}),a("template",{slot:"close-button-name"},[t._v("OK")])],2):t._e()],1)},Sa=[],Oa=(a("a623"),a("caad"),a("b64b"),a("ac1f"),a("25f0"),a("6062"),a("2532"),a("3ca3"),a("1276"),a("ddb0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"linebox",class:{error:null!==t.checkerMessage}},[a("div",{staticClass:"linebox-header"},[a("div",{staticClass:"line-input"},[a("h4",[t._v("Line ID")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.route.name,expression:"route.name"}],attrs:{type:"text"},domProps:{value:t.route.name},on:{input:function(e){e.target.composing||t.$set(t.route,"name",e.target.value)}}})]),a("div",{staticClass:"line-input"},[a("h4",[t._v("Mode")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.route.transport_mode_public_id,expression:"route.transport_mode_public_id"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.route,"transport_mode_public_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{selected:"",disabled:""}},[t._v("Choose one")]),t._l(t.transportModeSet,(function(e){return a("option",{key:e.public_id,domProps:{value:e.public_id}},[t._v(t._s(e.name))])}))],2)]),a("div",{staticClass:"grid min"},[a("button",{staticClass:"btn icon",class:{active:t.showInGraphI&&t.showInGraphR||t.showInGraphI&&!t.showInGraphR||!t.showInGraphI&&t.showInGraphR},attrs:{alt:"Show"},on:{click:t.setVisibility}},[a("span",{staticClass:"material-icons"},[t._v(t._s(t.showInGraphI&&t.showInGraphR?"visibility":t.showInGraphI&&!t.showInGraphR||!t.showInGraphI&&t.showInGraphR?"vignette":"visibility_off"))])]),a("button",{staticClass:"btn icon",attrs:{alt:t.collapse?"Open":"Close"},on:{click:function(e){t.collapse=!t.collapse}}},[a("span",{staticClass:"material-icons"},[t._v(t._s(t.collapse?"arrow_drop_down":"arrow_drop_up"))])])])]),a("div",{staticClass:"linebox-anim",class:{open:!t.collapse}},[a("div",{staticClass:"linebox-content"},[a("div",{staticClass:"table min"},[a("table",[a("tbody",[t._m(0),a("tr",[t._m(1),a("td",{attrs:{colspan:"4"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.route.nodes_sequence_i,expression:"route.nodes_sequence_i"}],attrs:{type:"text",placeholder:"-",disabled:3==t.route.type},domProps:{value:t.route.nodes_sequence_i},on:{change:function(e){return t.$emit("node-sequence-change")},input:function(e){e.target.composing||t.$set(t.route,"nodes_sequence_i",e.target.value)}}})]),a("td",{attrs:{colspan:"4"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.route.stops_sequence_i,expression:"route.stops_sequence_i"}],attrs:{type:"text",placeholder:"-",disabled:3==t.route.type},domProps:{value:t.route.stops_sequence_i},on:{input:function(e){e.target.composing||t.$set(t.route,"stops_sequence_i",e.target.value)}}})]),a("td",{attrs:{colspan:"1"}},[a("button",{staticClass:"btn icon flat",class:{active:t.showInGraphI},attrs:{alt:t.showInGraphI?"Hide":"Show"},on:{click:function(e){return t.$emit("update-visibility",t.route,!t.showInGraphI,t.showInGraphR)}}},[a("span",{staticClass:"material-icons"},[t._v(t._s(t.showInGraphI?"visibility":"visibility_off"))])])])]),a("tr",[t._m(2),a("td",{attrs:{colspan:"4"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.route.nodes_sequence_r,expression:"route.nodes_sequence_r"}],attrs:{type:"text",placeholder:"-",disabled:3==t.route.type},domProps:{value:t.route.nodes_sequence_r},on:{change:function(e){return t.$emit("node-sequence-change")},input:function(e){e.target.composing||t.$set(t.route,"nodes_sequence_r",e.target.value)}}})]),a("td",{attrs:{colspan:"4"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.route.stops_sequence_r,expression:"route.stops_sequence_r"}],attrs:{type:"text",placeholder:"-",disabled:3==t.route.type},domProps:{value:t.route.stops_sequence_r},on:{input:function(e){e.target.composing||t.$set(t.route,"stops_sequence_r",e.target.value)}}})]),a("td",{attrs:{colspan:"1"}},[a("button",{staticClass:"btn icon flat",class:{active:t.showInGraphR},attrs:{alt:t.showInGraphR?"Hide":"Show"},on:{click:function(e){return t.$emit("update-visibility",t.route,t.showInGraphI,!t.showInGraphR)}}},[a("span",{staticClass:"material-icons"},[t._v(t._s(t.showInGraphR?"visibility":"visibility_off"))])])])])])])]),a("div",{staticClass:"checker"},[null!==t.checkerMessage?a("Checker",{attrs:{isError:!0,message:t.checkerMessage}}):t._e(),a("button",{staticClass:"btn neuro",on:{click:function(e){t.showDeleteConfirmationModal=!0}}},[a("span",[t._v("Delete")]),a("span",{staticClass:"material-icons"},[t._v("delete")])])],1)])])]),t.showDeleteConfirmationModal?a("Modal",{attrs:{showCancelButton:!0,modalClasses:["warning"]},on:{cancel:function(e){t.showDeleteConfirmationModal=!1},close:function(e){t.showDeleteConfirmationModal=!1},ok:t.deleteRow}},[a("template",{slot:"title"},[a("div",{staticClass:"icon"},[a("span",{staticClass:"material-icons"},[t._v("warning")])]),a("div",[a("h4",[t._v("Warning")])])]),a("p",{attrs:{slot:"content"},slot:"content"},[t._v('Are you sure you want to delete route "'+t._s(t.route.name)+'"')]),a("template",{slot:"close-button-name"},[t._v("Proceed")])],2):t._e()],1)}),za=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{attrs:{colspan:"1"}},[a("span",[t._v("Dir")])]),a("th",{attrs:{colspan:"4"}},[a("span",[t._v("Node sequence")])]),a("th",{attrs:{colspan:"4"}},[a("span",[t._v("Stop sequence")])]),a("th",{attrs:{colspan:"1"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{attrs:{colspan:"1"}},[a("span",[t._v("I")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{attrs:{colspan:"1"}},[a("span",[t._v("R")])])}],Ta={name:"RouteCard",components:{Modal:g,Checker:ce},props:{route:{type:Object,required:!0},transportModeSet:{type:Array,required:!0},transportNetworkPublicId:{type:String,required:!1,default:null},checkerMessage:{type:String,required:!1,default:null},showInGraphI:{type:Boolean,required:!0,default:!1},showInGraphR:{type:Boolean,required:!0,default:!1}},data:function(){return{showDeleteConfirmationModal:!1,collapse:!0}},methods:{setVisibility:function(){this.showInGraphI&&this.showInGraphR||this.showInGraphI&&!this.showInGraphR||!this.showInGraphI&&this.showInGraphR?this.$emit("update-visibility",this.route,!1,!1):this.showInGraphI||this.showInGraphR||this.$emit("update-visibility",this.route,!0,!0)},deleteRow:function(){this.$emit("erase-route",this.route)}},updated:function(){void 0!==this.route.collapse&&(this.collapse=this.route.collapse)}},Ga=Ta,Va=Object(o["a"])(Ga,Oa,za,!1,null,"77845576",null),La=Va.exports,Aa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.show?a("Modal",t._g({attrs:{modalClasses:["modal-lines"]},on:{ok:t.createDefaultRoutes}},t.$listeners),[a("template",{slot:"title"},[a("h2",[t._v("Add default transit lines")])]),a("template",{slot:"content"},[a("div",{staticClass:"default-lines"},t._l(t.defaultRoutes,(function(e,s){return a("div",{key:e.id,staticClass:"default-line-row"},[a("div",{staticClass:"options"},[a("div",{staticClass:"mode"},[a("h4",[t._v("Mode")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.transportMode,expression:"defaultRoute.transportMode"}],on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"transportMode",a.target.multiple?s:s[0])}}},[a("option",{attrs:{selected:"",disabled:""}},[t._v("Choose one")]),t._l(t.transportmode_set,(function(e){return a("option",{key:e.public_id,domProps:{value:e.public_id}},[t._v(t._s(e.name))])}))],2)]),a("div",{staticClass:"type"},[a("h4",[t._v("Type")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"defaultRoute.type"}],on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"type",a.target.multiple?s:s[0])}}},[a("option",{attrs:{selected:"",disabled:""}},[t._v("Choose one")]),t._l(t.defaultRouteTypes,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))],2)]),["Diametral","Tangential"].includes(e.type)?a("div",{staticClass:"zones"},[a("h4",[t._v("Zone jumps")]),a("div",{staticClass:"counter"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.zoneJumps,expression:"defaultRoute.zoneJumps"}],staticClass:"number",attrs:{type:"number",placeholder:"0"},domProps:{value:e.zoneJumps},on:{input:function(a){a.target.composing||t.$set(e,"zoneJumps",a.target.value)}}}),a("button",{staticClass:"num plus",on:{click:function(t){e.zoneJumps+=1}}},[a("span",{staticClass:"material-icons"},[t._v("arrow_drop_up")])]),a("button",{staticClass:"num less",on:{click:function(t){e.zoneJumps-=1}}},[a("span",{staticClass:"material-icons"},[t._v("arrow_drop_down")])])])]):t._e(),["Diametral","Tangential","Radial"].includes(e.type)?a("div",{staticClass:"extension"},[a("h4",[t._v("Extension")]),a("label",{staticClass:"switch big"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.extension,expression:"defaultRoute.extension"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.extension)?t._i(e.extension,null)>-1:e.extension},on:{change:function(a){var s=e.extension,n=a.target,i=!!n.checked;if(Array.isArray(s)){var o=null,r=t._i(s,o);n.checked?r<0&&t.$set(e,"extension",s.concat([o])):r>-1&&t.$set(e,"extension",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(e,"extension",i)}}}),a("div",{staticClass:"switch-body"},[a("span",{staticClass:"text-on"},[t._v("Short")]),a("span",{staticClass:"text-off"},[t._v("Large")])])])]):t._e(),["Diametral","Tangential","Radial"].includes(e.type)?a("div",{staticClass:"exclusive"},[a("h4",[t._v("OD exclusive")]),a("label",{staticClass:"switch big"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.odExclusive,expression:"defaultRoute.odExclusive"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.odExclusive)?t._i(e.odExclusive,null)>-1:e.odExclusive},on:{change:function(a){var s=e.odExclusive,n=a.target,i=!!n.checked;if(Array.isArray(s)){var o=null,r=t._i(s,o);n.checked?r<0&&t.$set(e,"odExclusive",s.concat([o])):r>-1&&t.$set(e,"odExclusive",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(e,"odExclusive",i)}}}),a("div",{staticClass:"switch-body"},[a("span",{staticClass:"text-on"},[t._v("Yes")]),a("span",{staticClass:"text-off"},[t._v("No")])])])]):t._e()]),a("div",{staticClass:"flex end"},[a("button",{staticClass:"btn icon",attrs:{alt:"Delete"},on:{click:function(e){return t.removeDefaultTemplateRoute(s)}}},[a("span",{staticClass:"material-icons"},[t._v("delete")])])])])})),0)]),a("template",{slot:"base"},[a("div",{staticClass:"left-content"},[a("button",{staticClass:"btn",on:{click:t.addDefaultTemplateRoute}},[a("span",{staticClass:"material-icons"},[t._v("add")]),a("span",[t._v("Add generic transit lines")])]),null!==t.errorMessage?a("div",{staticClass:"checker dark"},[a("div",{staticClass:"grid checker-body error"},[a("span",{staticClass:"material-icons icon"},[t._v("warning")]),a("span",{staticClass:"text"},[t._v(t._s(t.errorMessage))])])]):t._e()]),a("div",{staticClass:"right-content"},[a("button",{staticClass:"btn red",on:{click:function(e){return t.$emit("close")}}},[a("span",[t._v("Cancel")])]),a("button",{staticClass:"btn",on:{click:t.createDefaultRoutes}},[a("span",[t._v("Generate")])])])]),a("template",{slot:"close-button-name"},[t._v("Proceed")])],2):t._e()],1)},Wa=[],qa={name:"RouteCard",components:{Modal:g},props:{route_set:{type:Array,required:!0},transportmode_set:{type:Array,required:!0},scene_public_id:{type:String,required:!0},show:{type:Boolean,required:!0}},data:function(){return{defaultRouteTypes:["Circular","Diametral","Feeder","Radial","Tangential"],defaultRoutes:[],errorMessage:null}},methods:{createDefaultRoutes:function(){var t=this;oa.createDefaultRoutes(this.scene_public_id,this.defaultRoutes).then((function(e){t.$emit("routes-created",e.data),t.defaultRoutes=[],t.$emit("close"),t.errorMessage=null})).catch((function(e){t.errorMessage=e.response.data.detail}))},addDefaultTemplateRoute:function(){var t={transportMode:null,type:null,zoneJumps:0,extension:!1,odExclusive:!1};this.defaultRoutes.push(t)},removeDefaultTemplateRoute:function(t){this.defaultRoutes.splice(t,1)}}},Ba=qa,Ua=Object(o["a"])(Ba,Aa,Wa,!1,null,"7cb9edae",null),Fa=Ua.exports,Qa={name:"NewNetwork",mixins:[se],components:{CityGraph:E,Modal:g,RouteCard:La,DefaultRouteCreator:Fa},data:function(){return{showDefaultRouteCreatorModal:!1,showLegendModal:!1,showWarningModal:!1,viewAll:!1,warningModalMessage:"",checkerMessages:[],routeVisibility:{},searchQuery:"",network:{public_id:null,name:null,route_set:[]},scene:{public_id:"",name:null,transportmode_set:[],city:{public_id:"",network_descriptor:{nodes:[],edges:[]}}},edgeWeights:{},graphRoutes:[]}},computed:{resultQuery:function(){var t=this;return this.searchQuery?this.network.route_set.filter((function(e){return t.searchQuery.toLowerCase().split(" ").every((function(t){return e.name.toLowerCase().includes(t)}))})):this.network.route_set}},methods:{setData:function(t,e){var a=this;t&&(this.network=t,this.network.route_set.forEach((function(t,e){t.id=a.network.route_set.length-e,a.checkerMessages.push(null),a.$set(a.routeVisibility,t.id,{showInGraphI:!1,showInGraphR:!1})}))),this.scene=e,this.scene.city.network_descriptor.edges.forEach((function(t){Object.keys(a.edgeWeights).indexOf(t.source.toString())<0&&a.$set(a.edgeWeights,t.source,{}),Object.keys(a.edgeWeights[t.source]).indexOf(t.target.toString())<0&&a.$set(a.edgeWeights[t.source],t.target,{value:1,routesNumber:0,hasRoutes:!1})})),this.setEdgeWeigths()},setEdgeWeigths:function(){var t=this;Object.keys(this.edgeWeights).forEach((function(e){Object.keys(t.edgeWeights[e]).forEach((function(a){t.edgeWeights[e][a].value=1,t.edgeWeights[e][a].routesNumber=0,t.edgeWeights[e][a].hasRoutes=!1}))}));var e=1;this.network.route_set.forEach((function(a){["nodes_sequence_i","nodes_sequence_r"].forEach((function(s){if(a[s]){var n=a[s].split(",");if(n.length>1)for(var i=0;i<n.length-1;i++)n[i]in t.edgeWeights&&n[i+1]in t.edgeWeights[n[i]]&&(t.edgeWeights[n[i]][n[i+1]].value+=1,t.edgeWeights[n[i]][n[i+1]].routesNumber+=1,t.edgeWeights[n[i]][n[i+1]].hasRoutes=!0,e=Math.max(e,t.edgeWeights[n[i]][n[i+1]].value))}}))})),Object.keys(this.edgeWeights).forEach((function(a){Object.keys(t.edgeWeights[a]).forEach((function(s){var n=Math.max(1,t.edgeWeights[a][s].value/e*10);t.edgeWeights[a][s].value=n}))}))},updateGraph:function(){this.setEdgeWeigths()},addOrRemoveGraphRouteObj:function(t,e,a,s){var n=this,i=this.graphRoutes.findIndex((function(e){return e.id===t.id}));e&&!a?this.graphRoutes.splice(i,1):!e&&a&&-1==i&&function(){var e=t.route+"-"+s,a=new Set,i={name:e,nodes:[],links:[]},o="i"===s?"nodes_sequence_i":"nodes_sequence_r";if(t[o]){var r=t[o].split(",");if(r.length>1)for(var l=0;l<r.length-1;l++)[r[l],r[l+1]].forEach((function(t){if(!a.has(t)){var e=n.scene.city.network_descriptor.nodes.findIndex((function(e){return e.id===Number(t)})),s=n.scene.city.network_descriptor.nodes[e].id,o=n.scene.city.network_descriptor.nodes[e].x,r=n.scene.city.network_descriptor.nodes[e].y;i.nodes.push({name:s,value:[o,r,s,s]}),a.add(t)}})),i.links.push({source:r[l].toString(),target:r[l+1].toString()})}n.graphRoutes.push(i)}()},updateTransportNetwork:function(){var t=this,e=null;e=this.network.public_id?oa.updateTransportNetwork(this.network.public_id,this.network.name,this.network.route_set):oa.createTransportNetwork(this.scene.public_id,this.network.name,this.network.route_set),e.then((function(e){var a="NetworkDetail";t.$router.currentRoute.name!==a?t.$router.push({name:a,params:{transportNetworkPublicId:e.data.public_id}}):t.$router.push({name:"SceneDetail",params:{cityPublicId:t.scene.city.public_id,scenePublicId:t.scene.public_id}})})).catch((function(e){if(Object.prototype.hasOwnProperty.call(e.response.data,"route_set"))e.response.data.route_set.forEach((function(e,a){if(0===Object.keys(e).length)t.$set(t.checkerMessages,a,null);else{var s={name:"Line ID",nodes_sequence_i:"Node sequence I",nodes_sequence_r:"Node sequence R",stops_sequence_i:"Stop sequence I",stops_sequence_r:"Stop sequence R",transport_mode_public_id:"Mode"},n=Object.keys(e)[0],i=s[n]+": "+e[n];t.$set(t.checkerMessages,a,i)}}));else{var a=t.getErrorMessage(e.response.data);t.warningModalMessage=a,t.showWarningModal=!0}}))},createRoutes:function(t){var e=this;t.forEach((function(t){t.id=e.network.route_set.length>0?e.network.route_set[0].id+1:1,e.network.route_set.push(t),e.checkerMessages.push(null),e.$set(e.routeVisibility,t.id,{showInGraphI:!1,showInGraphR:!1})})),this.setEdgeWeigths()},deleteRoute:function(t){var e=this.network.route_set.findIndex((function(e){return e.id===t.id}));this.network.route_set.splice(e,1),this.checkerMessages.splice(e,1),delete this.routeVisibility[t.id],this.setEdgeWeigths()},addEmptyRoute:function(){var t={id:this.network.route_set.length>0?this.network.route_set[0].id+1:1,name:null,transport_mode_public_id:null,nodes_sequence_i:null,nodes_sequence_r:null,stops_sequence_i:null,stops_sequence_r:null,type:1,collapse:!1};this.network.route_set.unshift(t),this.checkerMessages.unshift(null),this.$set(this.routeVisibility,t.id,{showInGraphI:!1,showInGraphR:!1})},updateVisibility:function(t,e,a){this.addOrRemoveGraphRouteObj(t,this.routeVisibility[t.id].showInGraphI,e,"i"),this.addOrRemoveGraphRouteObj(t,this.routeVisibility[t.id].showInGraphR,a,"r"),this.routeVisibility[t.id].showInGraphI=e,this.routeVisibility[t.id].showInGraphR=a,e&&a||(this.viewAll=!1)},setViewAll:function(){var t=this,e=!0;this.viewAll&&(e=!1),this.network.route_set.forEach((function(a){t.addOrRemoveGraphRouteObj(a,t.routeVisibility[a.id].showInGraphI,e,"i"),t.addOrRemoveGraphRouteObj(a,t.routeVisibility[a.id].showInGraphR,e,"r")})),Object.keys(this.routeVisibility).forEach((function(a){t.routeVisibility[a].showInGraphI=e,t.routeVisibility[a].showInGraphR=e})),this.viewAll=e}},beforeRouteEnter:function(t,e,a){t.params.transportNetworkPublicId?S.a.all([oa.getTransportNetwork(t.params.transportNetworkPublicId),Et.getScene(t.params.scenePublicId)]).then(S.a.spread((function(t,e){a((function(a){return a.setData(t.data,e.data)}))}))):Et.getScene(t.params.scenePublicId).then((function(t){a((function(e){e.setData(null,t.data),e.setEdgeWeigths()}))}))},beforeRouteUpdate:function(t,e,a){var s=this;t.params.transportNetworkPublicId?S.a.all([oa.getTransportNetwork(t.params.transportNetworkPublicId),Et.getScene(t.params.scenePublicId)]).then(S.a.spread((function(t,e){s.setData(t.data,e.data),a()}))):Et.getScene(t.params.scenePublicId).then((function(t){s.setData(null,t.data),s.setEdgeWeigths(),a()}))}},Ja=Qa,Ha=Object(o["a"])(Ja,$a,Sa,!1,null,null,null),Ya=Ha.exports,Ka=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"NetworkResults"},[a("div",{staticClass:"header"},[a("h1",[t._v("Optimization results")]),a("p",[t._v(t._s(t.network.name))])]),a("section",[a("div",{staticClass:"grid title"},[a("h2",[t._v("Overall optimization results")]),a("a",{staticClass:"icon-link",on:{click:function(e){t.showLegendModal=!0}}},[a("span",{staticClass:"material-icons"},[t._v("help")])])])]),a("section",[a("NetworkResultTable",{attrs:{rows:[t.network],showNetworkName:!1}})],1),a("section",[a("div",{staticClass:"grid-results"},[a("div",{staticClass:"title grid full"},[a("div",{staticClass:"grid"},[a("h2",[t._v("Result details")]),a("a",{staticClass:"icon-link",on:{click:function(e){t.showDetailLegendModal=!0}}},[a("span",{staticClass:"material-icons"},[t._v("help")])])]),a("button",{staticClass:"btn neuro",class:{active:t.viewAll},on:{click:t.setViewAll}},[a("span",{staticClass:"material-icons"},[t._v("visibility")]),a("span",[t._v("View all")])])]),a("div",{staticClass:"graph-view"},[a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],attrs:{type:"search",placeholder:"filter by ROUTE ID ..."},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}})]),a("div",{staticClass:"graph-container"},[a("CityGraph",{attrs:{network:t.scene.city.network_descriptor,edgeWeights:t.edgeWeights,routes:t.graphRoutes,showNodeId:!0}})],1)]),a("div",{staticClass:"table"},[a("table",{staticClass:"result-details"},[t._m(0),t._l(t.resultQuery,(function(e,s){return[a("RouteResultCard",{key:s,attrs:{route:e,showInGraphI:t.routeVisibility[e.route]["showInGraphI"],showInGraphR:t.routeVisibility[e.route]["showInGraphR"]},on:{"update-visibility":t.updateVisibility}})]}))],2)])])]),a("footer",[a("div",{staticClass:"container full grid"},[a("div",{staticClass:"left-content"},[a("p",{staticClass:"info"},[t._v(t._s(t.resultPerRoute.length)+" transit lines")])]),t._m(1)])]),t.showDetailLegendModal?a("Modal",{attrs:{showBase:!1},on:{close:function(e){t.showDetailLegendModal=!1}}},[a("template",{slot:"title"},[a("h2",[t._v("Terminology")])]),a("template",{slot:"content"},[a("div",{staticClass:"table"},[a("table",[a("tbody",[a("tr",[a("th",[a("span",[t._v("Symbol")])]),a("th",[a("span",[t._v("Unit")])]),a("th",[a("span",[t._v("Description")])])]),a("tr",[a("td",[a("span",[t._v("𝑓")])]),a("td",[t._v("[𝑣𝑒h/h]")]),a("td",[a("span",[t._v("frequency")])])]),a("tr",[a("td",[a("span",[t._v("𝐾")])]),a("td",[t._v("[𝑝𝑎𝑥/𝑣𝑒h]")]),a("td",[a("span",[t._v("Design boarding size")])])]),a("tr",[a("td",[a("span",[t._v("𝐵")])]),a("td",[t._v("[𝑣𝑒h]")]),a("td",[a("span",[t._v("Vehicle fleet")])])]),a("tr",[a("td",[a("span",[t._v("𝑡𝑐")])]),a("td",[t._v("[𝑚𝑖𝑛]")]),a("td",[a("span",[t._v("Cycle time")])])]),a("tr",[a("td",[a("span",[t._v("𝐶O")])]),a("td",[a("span",[t._v("[𝑈𝑆$/h − 𝑝𝑎𝑥]")])]),a("td",[a("span",[t._v("Cost of operation")])])]),a("tr",[a("td",[a("span",[t._v("𝜆𝑚𝑖𝑛")])]),a("td",[a("span",[t._v("[%]")])]),a("td",[a("span",[t._v("minimum boarding fee")])])]),a("tr",[a("td",[a("span",[t._v("[𝜆]")])]),a("td",[t._v("[%]")]),a("td",[a("span",[t._v("Boarding fee")])])])])])])])],2):t._e(),a("NetworkResultLegend",{attrs:{showLegendModal:t.showLegendModal},on:{close:function(e){t.showLegendModal=!1}}})],1)},Za=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[a("span",[t._v("Line ID")])]),a("th",[a("a",[a("span",[t._v("𝑓"),a("br"),t._v("[𝑣𝑒h/h]")]),a("span",{staticClass:"btn-filter-column material-icons"},[t._v("unfold_more")])])]),a("th",[a("a",[a("span",[t._v("𝐾"),a("br"),t._v("[𝑝𝑎𝑥/𝑣𝑒h]")]),a("span",{staticClass:"btn-filter-column material-icons"},[t._v("unfold_more")])])]),a("th",[a("a",[a("span",[t._v("𝐵"),a("br"),t._v("[𝑣𝑒h]")]),a("span",{staticClass:"btn-filter-column material-icons"},[t._v("unfold_more")])])]),a("th",[a("a",[a("span",[t._v("𝑡𝑐"),a("br"),t._v("[𝑚𝑖𝑛]")]),a("span",{staticClass:"btn-filter-column material-icons"},[t._v("unfold_more")])])]),a("th",[a("a",[a("span",[t._v("𝐶𝑜"),a("br"),t._v("[𝑈𝑆$/h − 𝑝𝑎𝑥]")]),a("span",{staticClass:"btn-filter-column material-icons"},[t._v("unfold_more")])])]),a("th",[a("a",[a("span",[t._v("𝜆𝑚𝑖𝑛")]),a("span",{staticClass:"btn-filter-column material-icons"},[t._v("unfold_more")])])]),a("th")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"right-content"},[a("button",{staticClass:"btn"},[a("span",{staticClass:"material-icons"},[t._v("chevron_left")]),a("span",[t._v("Back")])]),a("button",{staticClass:"btn"},[a("span",[t._v("Download data")]),a("span",{staticClass:"material-icons"},[t._v("get_app")])])])}],Xa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tbody",{staticClass:"collapse-row",class:{active:!t.collapse}},[a("tr",{staticClass:"main-row"},[a("td",[a("span",[t._v(t._s(t.computedRoute.route))])]),a("td",[a("span",[t._v(t._s(t.computedRoute.frequency.toLocaleString()))])]),a("td",[a("span",[t._v(t._s(t.computedRoute.k.toLocaleString()))])]),a("td",[a("span",[t._v(t._s(t.computedRoute.b.toLocaleString()))])]),a("td",[a("span",[t._v(t._s(t.computedRoute.tc.toLocaleString()))])]),a("td",[a("span",[t._v(t._s(t.computedRoute.co.toLocaleString()))])]),a("td",[a("span",[t._v(t._s(t.computedRoute.lambda_min.toLocaleString()))])]),a("td",[a("div",{staticClass:"grid g2 min"},[a("button",{staticClass:"btn icon flat",class:{active:!t.collapse},on:{click:t.setVisibility}},[a("span",{staticClass:"material-icons"},[t._v(t._s(t.showInGraphI&&t.showInGraphR?"visibility":t.showInGraphI&&!t.showInGraphR||!t.showInGraphI&&t.showInGraphR?"vignette":"visibility_off"))])]),a("button",{staticClass:"btn icon flat"},[a("span",{staticClass:"material-icons",on:{click:function(e){t.collapse=!t.collapse}}},[t._v(t._s(t.collapse?"arrow_drop_down":"arrow_drop_up"))])])])])]),a("tr",[a("td",[a("table",{staticClass:"subtable"},[a("thead",[a("tr",[a("th",{attrs:{colspan:"3"}},[a("div",{staticClass:"grid"},[a("span",[t._v("Inbound")]),a("button",{staticClass:"btn icon flat",class:{active:t.showInGraphI},on:{click:function(e){return t.$emit("update-visibility",t.route,!t.showInGraphI,t.showInGraphR)}}},[a("span",{staticClass:"material-icons"},[t._v(t._s(t.showInGraphI?"visibility":"visibility_off"))])])])])])]),a("tbody",[t._m(0),t._l(t.computedRoute.directionI,(function(e,s){return a("tr",{key:s},[a("td",[a("span",[t._v(t._s(e.origin_node))])]),a("td",[a("span",[t._v(t._s(e.destination_node))])]),a("td",[a("span",[t._v(t._s(e.lambda_value))])])])}))],2)])]),a("td",[a("table",{staticClass:"subtable"},[a("thead",[a("tr",[a("th",{attrs:{colspan:"3"}},[a("div",{staticClass:"grid"},[a("span",[t._v("Outbound")]),a("button",{staticClass:"btn icon flat",class:{active:t.showInGraphR},on:{click:function(e){return t.$emit("update-visibility",t.route,t.showInGraphI,!t.showInGraphR)}}},[a("span",{staticClass:"material-icons"},[t._v(t._s(t.showInGraphR?"visibility":"visibility_off"))])])])])])]),a("tbody",[t._m(1),t._l(t.computedRoute.directionR,(function(e,s){return a("tr",{key:s},[a("td",[a("span",[t._v(t._s(e.origin_node))])]),a("td",[a("span",[t._v(t._s(e.destination_node))])]),a("td",[a("span",[t._v(t._s(e.lambda_value))])])])}))],2)])])])])},ts=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[a("span",[t._v("Node I")])]),a("th",[a("span",[t._v("Node j")])]),a("th",[a("span",[t._v("𝜆")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[a("span",[t._v("Node I")])]),a("th",[a("span",[t._v("Node j")])]),a("th",[a("span",[t._v("𝜆")])])])}],es={name:"RouteResultCard",props:{route:{type:Object,required:!0},showInGraphI:{type:Boolean,required:!0,default:!1},showInGraphR:{type:Boolean,required:!0,default:!1}},data:function(){return{collapse:!0}},computed:{computedRoute:function(){var t=[],e=[];this.route.optimizationresultperroutedetail_set.forEach((function(a){"i"===a.direction?t.push(a):"r"===a.direction&&e.push(a)}));var a=JSON.parse(JSON.stringify(this.route));return delete a.optimizationresultperroutedetail_set,a.directionI=t,a.directionR=e,a}},methods:{setVisibility:function(){this.showInGraphI&&this.showInGraphR||this.showInGraphI&&!this.showInGraphR||!this.showInGraphI&&this.showInGraphR?this.$emit("update-visibility",this.route,!1,!1):this.showInGraphI||this.showInGraphR||this.$emit("update-visibility",this.route,!0,!0)}}},as=es,ss=Object(o["a"])(as,Xa,ts,!1,null,"320c3b72",null),ns=ss.exports,is={name:"NetworkResults",components:{Modal:g,NetworkResultTable:Ca,NetworkResultLegend:Na,RouteResultCard:ns,CityGraph:E},data:function(){return{showLegendModal:!1,showDetailLegendModal:!1,viewAll:!1,searchQuery:"",network:{name:""},resultPerRoute:[],routeVisibility:{},scene:{city:{network_descriptor:{nodes:[],edges:[]}}},edgeWeights:{},graphRoutes:[]}},computed:{resultQuery:function(){var t=this;return this.searchQuery?this.resultPerRoute.filter((function(e){return t.searchQuery.toLowerCase().split(" ").every((function(t){return e.route.toLowerCase().includes(t)}))})):this.resultPerRoute}},methods:{setData:function(t,e){var a=this;this.network=t.opt_result,this.resultPerRoute=t.opt_result_per_route,this.scene=e,this.resultPerRoute.forEach((function(t){a.$set(a.routeVisibility,t.route,{showInGraphI:!1,showInGraphR:!1})})),this.setEdgeWeigths()},setEdgeWeigths:function(){var t=this;this.scene.city.network_descriptor.edges.forEach((function(e){Object.keys(t.edgeWeights).indexOf(e.source.toString())<0&&t.$set(t.edgeWeights,e.source,{}),Object.keys(t.edgeWeights[e.source]).indexOf(e.target.toString())<0&&t.$set(t.edgeWeights[e.source],e.target,{value:1,routesNumber:0,hasRoutes:!1})}));var e=0;this.resultPerRoute.forEach((function(a){a.optimizationresultperroutedetail_set.forEach((function(a){t.edgeWeights[a.origin_node][a.destination_node].value+=1,t.edgeWeights[a.origin_node][a.destination_node].routesNumber+=1,t.edgeWeights[a.origin_node][a.destination_node].hasRoutes=!0,e=Math.max(e,t.edgeWeights[a.origin_node][a.destination_node].value)}))})),Object.keys(this.edgeWeights).forEach((function(a){Object.keys(t.edgeWeights[a]).forEach((function(s){var n=Math.max(1,t.edgeWeights[a][s].value/e*10);t.edgeWeights[a][s].value=n}))}))},addOrRemoveGraphRouteObj:function(t,e,a,s){var n=this,i=t.route+"-"+s,o=this.graphRoutes.findIndex((function(t){return t.name===i}));if(e&&!a)this.graphRoutes.splice(o,1);else if(!e&&a&&-1==o){var r=new Set,l={name:i,nodes:[],links:[]};t.optimizationresultperroutedetail_set.forEach((function(t){if(t.direction===s){if(!r.has(t.origin_node)){var e=n.scene.city.network_descriptor.nodes.findIndex((function(e){return e.id===t.origin_node})),a=n.scene.city.network_descriptor.nodes[e].id,i=n.scene.city.network_descriptor.nodes[e].x,o=n.scene.city.network_descriptor.nodes[e].y;l.nodes.push({name:a,value:[i,o,a,a]}),r.add(t.origin_node)}if(!r.has(t.destination_node)){var c=n.scene.city.network_descriptor.nodes.findIndex((function(e){return e.id===t.destination_node})),d=n.scene.city.network_descriptor.nodes[c].id,u=n.scene.city.network_descriptor.nodes[c].x,p=n.scene.city.network_descriptor.nodes[c].y;l.nodes.push({name:d,value:[u,p,d,d]}),r.add(t.destination_node)}l.links.push({source:t.origin_node.toString(),target:t.destination_node.toString()})}})),this.graphRoutes.push(l)}},updateVisibility:function(t,e,a){this.addOrRemoveGraphRouteObj(t,this.routeVisibility[t.route].showInGraphI,e,"i"),this.addOrRemoveGraphRouteObj(t,this.routeVisibility[t.route].showInGraphR,a,"r"),this.routeVisibility[t.route]["showInGraphI"]=e,this.routeVisibility[t.route]["showInGraphR"]=a,e&&a||(this.viewAll=!1)},setViewAll:function(){var t=this,e=!0;this.viewAll&&(e=!1),this.resultPerRoute.forEach((function(a){t.addOrRemoveGraphRouteObj(a,t.routeVisibility[a.route].showInGraphI,e,"i"),t.addOrRemoveGraphRouteObj(a,t.routeVisibility[a.route].showInGraphR,e,"r")})),Object.keys(this.routeVisibility).forEach((function(a){t.routeVisibility[a]["showInGraphI"]=e,t.routeVisibility[a]["showInGraphR"]=e})),this.viewAll=e}},beforeRouteEnter:function(t,e,a){t.params.transportNetworkPublicId&&S.a.all([oa.getResults(t.params.transportNetworkPublicId),Et.getScene(t.params.scenePublicId)]).then(S.a.spread((function(t,e){a((function(a){return a.setData(t.data,e.data)}))})))},beforeRouteUpdate:function(t,e,a){var s=this;t.params.transportNetworkPublicId&&S.a.all([oa.getResults(t.params.transportNetworkPublicId),Et.getScene(t.params.scenePublicId)]).then(S.a.spread((function(t,e){s.setData(t.data,e.data),a()})))}},os=is,rs=Object(o["a"])(os,Ka,Za,!1,null,null,null),ls=rs.exports;s["a"].use(d["a"]);var cs=[{path:"",redirect:"/dashboard"},{path:"/cities/new",name:"NewCity",component:me,meta:{breadcrumb:"New city"}},{path:"/my_cities",component:{render:function(t){return t("router-view")}},meta:{breadcrumb:"My cities"},children:[{path:"",name:"MyCities",component:it},{path:":cityPublicId",component:{render:function(t){return t("router-view")}},meta:{breadcrumb:function(){return{label:this.$route.params.cityPublicId}}},children:[{path:"",name:"CityDetail",component:Wt},{path:"demand",name:"NewCityStep2",component:ge,meta:{breadcrumb:"demand"}},{path:"edit",name:"EditCity",component:me,meta:{breadcrumb:"edit"}},{path:"scene/:scenePublicId",component:{render:function(t){return t("router-view")}},meta:{breadcrumb:function(){return{label:this.$route.params.scenePublicId}}},children:[{path:"",name:"SceneDetail",component:ma},{path:"edit",name:"EditScene",component:Be,meta:{breadcrumb:"edit"}},{path:"new_network",name:"NewNetwork",component:Ya,meta:{breadcrumb:"New transport network"}},{path:"global_results",name:"GlobalResults",component:Ea,meta:{breadcrumb:"Global results"}},{path:"network/:transportNetworkPublicId",component:{render:function(t){return t("router-view")}},meta:{breadcrumb:function(){return{label:this.$route.params.transportNetworkPublicId}}},children:[{path:"",name:"NetworkDetail",component:Ya},{path:"results",name:"NetworkResults",component:ls,meta:{breadcrumb:function(){return{label:"Results"}}}}]}]},{path:"new_scene",name:"NewScene",component:Be,meta:{breadcrumb:"New scene"}}]}]},{path:"/dashboard",name:"Dashboard",component:ut,meta:{breadcrumb:"Dashboard"}},{path:"/404",component:ft},{path:"*",redirect:"/404"}],ds=new d["a"]({mode:"history",base:"/",routes:cs}),us=ds,ps=a("2f62");s["a"].use(ps["a"]);var hs=new ps["a"].Store({state:{},mutations:{},actions:{},modules:{}}),ms=a("0561"),vs=a.n(ms);a("3aff"),a("6672"),s["a"].component("v-chart",N["a"]),s["a"].use(vs.a,{template:'        <nav v-if="$breadcrumbs.length" aria-label="breadcrumb" class="breadcrumbs">\n<span class="step first"><span class="material-icons">home</span></span>                <span v-for="(crumb, key) in $breadcrumbs" v-if="crumb.meta.breadcrumb" :key="key" class="step" aria-current="page">\n                    <router-link :to="{ path: getPath(crumb) }">{{ getBreadcrumb(crumb.meta.breadcrumb) }}</router-link>                </span>\n        </nav>'}),s["a"].config.productionTip=!1,new s["a"]({router:us,store:hs,render:function(t){return t(c)}}).$mount("#app")},"5a7a":function(t,e,a){"use strict";var s=a("19a5"),n=a.n(s);n.a},6672:function(t,e,a){},"715f":function(t,e,a){"use strict";var s=a("12e6"),n=a.n(s);n.a}});
//# sourceMappingURL=app.71b195cb.js.map